(this["webpackJsonpremote-faces-web"]=this["webpackJsonpremote-faces-web"]||[]).push([[1],{13:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=32},21:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r=n(1),a=n.n(r),c=n(2),o=n(4),u=n(13);n.d(t,"a",(function(){return u.a}));var i=function(){var e=Object(c.a)(a.a.mark((function e(){var t,r=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(o.e)()){e.next=6;break}return e.next=3,Promise.all([n.e(15),n.e(8)]).then(n.bind(null,51));case 3:t=e.sent.createRoom,e.next=15;break;case 6:if(!Object(o.f)()){e.next=12;break}return e.next=9,Promise.all([n.e(0),n.e(7)]).then(n.bind(null,49));case 9:t=e.sent.createRoom,e.next=15;break;case 12:return e.next=14,Promise.all([n.e(0),n.e(6)]).then(n.bind(null,50));case 14:t=e.sent.createRoom;case 15:return e.abrupt("return",t.apply(void 0,r));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},29:function(e,t,n){e.exports=n(48)},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},38:function(e,t,n){},4:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"g",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return i})),n.d(t,"f",(function(){return s}));var r=function(e){try{var t=new URL(e).hash.slice(1),n=new URLSearchParams(t),r=window.location.hash.slice(1),a=new URLSearchParams(r);n.forEach((function(e,t){a.set(t,e)})),window.location.hash=a.toString()}catch(c){}},a=function(e){try{var t=new URL(e).hash.slice(1);return new URLSearchParams(t).get("roomId")}catch(n){return null}},c=function(){var e=window.location.hash.slice(1);return new URLSearchParams(e).get("roomId")},o=function(e){var t=window.location.hash.slice(1),n=new URLSearchParams(t);n.set("roomId",e),window.location.hash=n.toString()},u=function(){var e=window.location.hash.slice(1);return new URLSearchParams(e).has("peerjs")},i=function(){var e=window.location.hash.slice(1),t=new URLSearchParams(e).get("peerjs");try{var n=new URL(t||""),r="https:"===n.protocol,a=r?443:80;return{host:n.host.split(":")[0],port:n.port?Number(n.port):a,path:n.pathname,secure:r}}catch(c){}},s=function(){var e=window.location.hash.slice(1);return new URLSearchParams(e).has("pubsub")}},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(28),o=n.n(c),u=(n(34),n(11)),i=n(12),s=n(14),l=n(15),f=(n(35),n(5)),m=a.a.memo((function(e){var t=e.err,n=Object(r.useState)(30),c=Object(f.a)(n,2),o=c[0],u=c[1];return Object(r.useEffect)((function(){o>0?setTimeout((function(){u(o-1)}),1e3):window.location.reload()})),a.a.createElement("div",null,a.a.createElement("h1",null,"Unrecoverable error occurred."),t&&a.a.createElement("h6",null,t.name,": ",t.message),a.a.createElement("p",null,"Will auto reload in ",o," sec."))})),p=(n(36),a.a.memo((function(){return a.a.createElement("div",{className:"Loading-container"},a.a.createElement("div",null,"Loading..."))}))),d=n(1),h=n.n(d),w=n(2),b=(n(38),n(6)),v=n(21),y=n(4),E=a.a.lazy((function(){return n.e(11).then(n.bind(null,1138))})),g=a.a.lazy((function(){return Promise.all([n.e(3),n.e(5)]).then(n.bind(null,1140))})),j=Object(y.d)(),C=Object(b.h)(),x=a.a.memo((function(){var e=Object(r.useState)(j),t=Object(f.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(!1),u=Object(f.a)(o,2),i=u[0],s=u[1],l=Object(r.useState)(""),m=Object(f.a)(l,2),p=m[0],d=m[1],x=function(){var e=Object(w.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.t1=Object(b.h)(v.a/2),e.next=4,Object(b.e)();case 4:e.t2=e.sent,e.t3=e.t1+e.t2,(0,e.t0)(e.t3);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n?a.a.createElement(g,{roomId:n,userId:C}):a.a.createElement("div",{className:"SingleRoomEntrance-container"},a.a.createElement(E,null,a.a.createElement("div",{className:"SingleRoomEntrance-input"},!i&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement("button",{type:"button",onClick:x},"Create a new room")),a.a.createElement("div",{className:"SingleRoomEntrance-or"},"OR"),a.a.createElement("div",null,a.a.createElement("button",{type:"button",onClick:function(){return s(!0)}},"Enter an existing room link"))),i&&a.a.createElement("div",null,a.a.createElement("input",{value:p,onChange:function(e){return d(e.target.value)},placeholder:"Enter room link..."}),a.a.createElement("button",{type:"button",onClick:function(){Object(y.a)(p),c(Object(y.b)(p))},disabled:!Object(y.b)(p)},"Enter room"),a.a.createElement("button",{type:"button",onClick:function(){return s(!1)}},"Cancel")))))})),O=(n(47),a.a.memo((function(e){var t=e.size,n=e.fill,r=e.color;return a.a.createElement("a",{href:"https://github.com/dai-shi/remote-faces",className:"GitHubCorner-container","aria-label":"View source on GitHub",target:"_blank",rel:"noopener noreferrer"},a.a.createElement("svg",{width:t||80,height:t||80,viewBox:"0 0 250 250",style:{fill:n||"#151513",color:r||"#fff",position:"absolute",top:0,border:0,right:0},"aria-hidden":"true"},a.a.createElement("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),a.a.createElement("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{transformOrigin:"130px 106px"},className:"GitHubCorner-octo-arm"}),a.a.createElement("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",className:"GitHubCorner-octo-body"})))}))),S=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.children,t=this.state.err;return t?a.a.createElement(m,{err:t}):e}}],[{key:"getDerivedStateFromError",value:function(e){return{err:e}}}]),n}(a.a.PureComponent),k=a.a.memo((function(){return a.a.createElement("div",{className:"App"},a.a.createElement(S,null,a.a.createElement(r.Suspense,{fallback:a.a.createElement(p,null)},a.a.createElement(x,null),a.a.createElement(O,{size:40,fill:"gray"}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,n){"use strict";n.d(t,"i",(function(){return i})),n.d(t,"h",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return m})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return w}));var r=n(1),a=n.n(r),c=n(2),o=n(10),u=n.n(o),i=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new TextEncoder,r=n.encode(t),e.next=4,window.crypto.subtle.digest("SHA-256",r);case 4:return c=e.sent,o=Array.from(new Uint8Array(c)),u=o.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t=window.crypto.getRandomValues(new Uint8Array(e)),n=Array.from(t),r=n.map((function(e){return e.toString(16).padStart(2,"0")})).join("");return r},l=function(){return 1e3+window.crypto.getRandomValues(new Uint16Array(1))[0]%9e3},f=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.generateKey({name:"AES-GCM",length:128},!0,["encrypt","decrypt"]);case 2:return t=e.sent,e.next=5,window.crypto.subtle.exportKey("raw",t);case 5:return n=e.sent,r=Array.from(new Uint8Array(n)),c=r.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,o,u,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=i.length>1&&void 0!==i[1]?i[1]:["encrypt","decrypt"],r=t.length/2,c=new Uint8Array(r),o=0;o<r;o+=1)c[o]=parseInt(t.slice(2*o,2*o+2),16);return e.next=6,window.crypto.subtle.importKey("raw",c,{name:"AES-GCM",length:128},!0,n);case 6:return u=e.sent,e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.crypto.getRandomValues(new Uint8Array(12)),e.next=3,window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,t);case 3:return c=e.sent,(o=new Uint8Array(r.length+c.byteLength)).set(r),o.set(new Uint8Array(c),r.length),e.abrupt("return",o.buffer);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,c){var o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.decrypt({name:"AES-GCM",iv:t.slice(n,n+12)},c,t.slice(n+12,n+r));case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new TextEncoder,c=r.encode(t),o=u.a.deflate(c),e.abrupt("return",p(o,n));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t,0,t.byteLength,n);case 2:return r=e.sent,c=u.a.inflate(new Uint8Array(r)),o=new TextDecoder("utf-8"),i=o.decode(c),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},[[29,2,4]]]);
//# sourceMappingURL=main.92486bd8.chunk.js.map