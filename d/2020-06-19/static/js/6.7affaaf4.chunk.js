(this["webpackJsonpremote-faces-web"]=this["webpackJsonpremote-faces-web"]||[]).push([[6],{103:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t),n.d(t,"GoBoard",(function(){return d}));var r=n(3),o=n(0),c=n.n(o),u=n(63),a=(n(103),n(1)),i=n.n(a),s=(n(43),n(51)),l=n(38),b=n(34),f=function(e){return Object(l.a)(e)&&function(e){return["play","pass","undo"].indexOf(e)>=0}(e.action)&&"number"===typeof e.updatedAt&&function(e){try{var t=e;return"number"===typeof t.size&&(t.grid.length===t.size*t.size&&(!t.grid.some((function(e){return e!==u.Color.B&&e!==u.Color.W&&e!==u.Color.E}))&&("number"===typeof t.capCount.black&&"number"===typeof t.capCount.white&&(t.turn===u.Color.B||t.turn===u.Color.W))))}catch(n){return!1}}(e.position)},p=function(e,t,n,r){var o=new u.Game(6),c=new u.CanvasBoard(e,{theme:u.themes.modernTheme,width:e.clientWidth,size:6}),a=[],i=null,s=function(){a=a.filter((function(e){return o.getStone(e.x,e.y)===("B"===e.type?u.Color.B:u.Color.W)||(c.removeObject(e),!1)})),i&&c.removeObject(i),i=null;for(var e=function(e){for(var t=function(t){var n=o.position.get(e,t);if(n&&!a.some((function(r){return r.x===e&&r.y===t&&n===("B"===r.type?u.Color.B:u.Color.W)}))){var r=new u.FieldObject(n===u.Color.B?"B":"W");c.addObjectAt(e,t,r),a.push(r),null===i?(i=new u.BoardMarkupObject("SQ",n),c.addObjectAt(e,t,i)):i&&(c.removeObject(i),i=!1)}},n=0;n<o.position.size;n+=1)t(n)},t=0;t<o.position.size;t+=1)e(t)},l=null,b=function(){l&&(c.removeObject(l),l=null)};c.on("mousemove",(function(e,t){if(t&&o.isValid(t.x,t.y)){if(l){if(l.x===t.x&&l.y===t.y)return;c.removeObject(l)}else l=new u.FieldObject(o.turn===u.Color.B?"B":"W");c.addObjectAt(t.x,t.y,l)}else b()})),c.on("mouseout",b),c.on("click",(function(e,c){var a=c.x,i=c.y;o.isValid(a,i)&&(b(),o.play(a,i),s(),t(o.turn===u.Color.B?"black":"white"),n(o.position.capCount),r("play",o.position))})),t(o.turn===u.Color.B?"black":"white");return{receiveData:function(e,r){var c=function(e){var t=new u.Position(e.size);return t.grid=e.grid,t.capCount=e.capCount,t.turn=e.turn,t}(r);o.pushPosition(c),s(),t(o.turn===u.Color.B?"black":"white"),n(o.position.capCount)},pass:function(){o.pass(),t(o.turn===u.Color.B?"black":"white"),r("pass",o.position)},undo:function(){o.popPosition(),s(),t(o.turn===u.Color.B?"black":"white"),n(o.position.capCount),r("undo",o.position)},resize:function(){c.setWidth(e.clientWidth)}}},d=c.a.memo((function(e){var t=e.roomId,n=e.userId,u=Object(o.useRef)(),a=function(e,t,n){var r=Object(o.useRef)();Object(b.e)(e,t,Object(o.useCallback)(function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,r.current;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),[]));var c=Object(b.a)(e,t),u=Object(o.useCallback)((function(e,t){var n={action:e,position:t,updatedAt:Date.now()};c(n),r.current=n}),[c]);return Object(b.b)(e,t,Object(o.useCallback)((function(e){f(e)&&(r.current&&r.current.updatedAt>e.updatedAt||(r.current=e,n(e.action,e.position)))}),[n])),{sendData:u}}(t,n,Object(o.useCallback)((function(e,t){u.current&&u.current.receiveData(e,t)}),[])).sendData,l=Object(o.useState)("black"),d=Object(r.a)(l,2),m=d[0],v=d[1],C=Object(o.useState)({black:0,white:0}),O=Object(r.a)(C,2),j=O[0],h=O[1],w=Object(o.useRef)(null);Object(o.useEffect)((function(){if(w.current){var e=w.current,t=p(e,v,h,a);return u.current=t,window.addEventListener("resize",t.resize),function(){window.removeEventListener("resize",t.resize)}}}),[a]);return c.a.createElement("div",{className:"GoBoard-container"},c.a.createElement("div",{className:"GoBoard-toolbar"},"Next Turn: ","black"===m?"Black":"White",c.a.createElement("button",{type:"button",onClick:function(){u.current&&u.current.pass()}},"Pass"),c.a.createElement("button",{type:"button",onClick:function(){u.current&&u.current.undo()}},"Undo"),c.a.createElement("div",null,"Capture Count: Black ",j.black,", White ",j.white)),c.a.createElement("div",{className:"GoBoard-canvas",ref:w}))}));t.default=d}}]);
//# sourceMappingURL=6.7affaaf4.chunk.js.map