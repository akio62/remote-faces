(this["webpackJsonpremote-faces-web"]=this["webpackJsonpremote-faces-web"]||[]).push([[3],{104:function(e,t,n){"use strict";n.r(t),n.d(t,"SingleRoom",(function(){return ie}));var r=n(3),a=n(0),c=n.n(a),i=(n(63),n(4)),o=function(e,t){try{window.localStorage.setItem(e,t)}catch(n){console.info("Failed to save string to localStorage",n)}},u=function(e){try{return window.localStorage.getItem(e)||""}catch(t){return""}},s=n(42),l=n(49),d=(n(66),n(37)),f=n(1),m=n.n(f),p=n(2),v=n(38),b=n(40),O=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var r,a,c,i,o,u,s,l,d,f,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof ImageCapture){e.next=21;break}return r=new ImageCapture(n),e.next=4,Object(b.a)(2e3);case 4:return e.prev=4,e.next=7,r.takePhoto();case 7:return c=e.sent,e.next=10,createImageBitmap(c);case 10:a=e.sent,e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(4),e.next=17,r.grabFrame();case 17:a=e.sent;case 18:return i=a.width,o=a.height,e.abrupt("return",{srcImg:a,srcW:i,srcH:o});case 21:return(u=document.getElementById("internal-video")).style.display="block",s=u.srcObject,l=function(){u.srcObject=s},u.srcObject=t,e.next=28,Object(b.a)(2e3);case 28:return d=u,f=u.videoWidth,p=u.videoHeight,e.abrupt("return",{srcImg:d,srcW:f,srcH:p,revert:l});case 32:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,c,i,o,u,s,l,d,f,p,v,b,g,k,h,j,y,E;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?{video:{deviceId:t}}:{video:!0},e.next=3,navigator.mediaDevices.getUserMedia(n);case 3:return a=e.sent,c=a.getVideoTracks(),i=Object(r.a)(c,1),o=i[0],u=document.getElementById("internal-canvas"),s=u.getContext("2d"),l=72,d=72,u.width=l,u.height=d,e.next=13,O(a,o);case 13:return f=e.sent,p=f.srcImg,v=f.srcW,b=f.srcH,g=f.revert,k=Math.max(l/v,d/b),h=Math.min(v,l/k),j=Math.min(b,d/k),y=(v-h)/2,E=(b-j)/2,s.drawImage(p,y,E,h,j,0,0,l,d),g&&g(),o.stop(),e.abrupt("return",u.toDataURL("image/jpeg"));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=n(34),h=function(e){return Object(v.a)(e)&&"string"===typeof e.image&&function(e){return Object(v.a)(e)&&"string"===typeof e.nickname&&"string"===typeof e.message&&"boolean"===typeof e.liveMode}(e.info)},j=n(39),y=n(100),E=n(101),I=n(43),w=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,c,i,o,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?{audio:{deviceId:t}}:{audio:!0},e.next=3,navigator.mediaDevices.getUserMedia(n);case 3:return a=e.sent,c=a.getAudioTracks(),i=Object(r.a)(c,1),o=i[0],e.next=7,o.applyConstraints({echoCancellation:!0,echoCancellationType:{ideal:"system"},noiseSuppression:{ideal:!0}});case 7:return u=function(){o.stop()},e.abrupt("return",{stream:a,dispose:u});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e,t,n){var r=t||new MediaStream;return r.addTrack(e),r.dispatchEvent(new MediaStreamTrackEvent("addtrack",{track:e})),e.addEventListener("ended",(function(){r.removeTrack(e),0===r.getTracks().length&&n(r)})),r},S=c.a.memo((function(e){var t=e.image,n=e.nickname,r=e.statusMesg,a=e.obsoleted,i=e.liveMode,o=e.stream,u=e.muted,s=e.micOn,d=e.speakerOn;return c.a.createElement("div",{className:"FaceImages-card",style:{opacity:a?.2:1}},i&&!a&&o?c.a.createElement("video",{className:"FaceImages-photo",ref:function(e){e&&e.srcObject!==o&&(e.srcObject=o)},autoPlay:!0,playsInline:!0,muted:u}):c.a.createElement("img",{src:t||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQI12NgYAAAAAMAASDVlMcAAAAASUVORK5CYII=",className:"FaceImages-photo",alt:"myself"}),c.a.createElement("div",{className:"FaceImages-name"},n),c.a.createElement("div",{className:"FaceImages-mesg",title:Object(l.a)(r)[1]?r:"(No status message)"},Object(l.a)(r)[0]),i&&!a&&o&&c.a.createElement("div",{className:"FaceImages-live-indicator",title:"Live Mode On"},"\u25c9"),i&&!a&&!o&&c.a.createElement("div",{className:"FaceImages-live-indicator",title:"Live Mode Available"},"\u25ce"),i&&!a&&c.a.createElement("div",{className:"FaceImages-mic-speaker-icons"},s&&c.a.createElement("span",{title:"Mic On"},"\ud83c\udfa4"),d&&c.a.createElement("span",{title:"Speaker On"},"\ud83d\udd08")))})),x=c.a.memo((function(e){var t=e.roomId,n=e.userId,i=e.nickname,o=e.statusMesg,u=e.liveMode,s=e.micOn,f=e.speakerOn,v=e.videoDeviceId,b=e.audioDeviceId,O=function(e,t,n,c,i,o,u,s){var f=Object(a.useState)(),v=Object(r.a)(f,2),b=v[0],O=v[1],j=Object(a.useState)([]),y=Object(r.a)(j,2),E=y[0],I=y[1],w=Object(a.useState)(),C=Object(r.a)(w,2),S=C[0],x=C[1];if(S)throw S;var T=Object(a.useRef)();Object(k.e)(e,t,Object(a.useCallback)(Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.current){e.next=2;break}return e.abrupt("return",null);case 2:return e.abrupt("return",T.current);case 3:case"end":return e.stop()}}),e)}))),[]));var M=Object(k.a)(e,t);return Object(k.b)(e,t,Object(a.useCallback)((function(e,t){if(h(e)){var n=Object(d.a)(Object(d.a)({},e),{},{userId:t.userId,received:Date.now(),obsoleted:!1,peerIndex:t.peerIndex});I((function(e){return e.find((function(e){return e.userId===n.userId}))?e.map((function(e){return e.userId===n.userId?n:e})):[].concat(Object(l.a)(e),[n])}))}}),[])),Object(k.d)(e,t,Object(a.useCallback)((function(e){if(e&&"CONNECTION_CLOSED"===e.type){var t=e.peerIndex;I((function(e){var n=!1,r=e.map((function(e){return e.peerIndex===t?(n=!0,Object(d.a)(Object(d.a)({},e),{},{obsoleted:!0})):e}));return n?r:e}))}}),[])),Object(a.useEffect)((function(){var e,t=function(){var e=Date.now()-12e4,t=Date.now()-6e5;I((function(n){var r=!1,a=n.map((function(n){return n.received<e&&!n.obsoleted?(r=!0,Object(d.a)(Object(d.a)({},n),{},{obsoleted:!0})):n.received<t&&n.obsoleted?(r=!0,null):n})).filter((function(e){return e}));return r?a:n}))},r=!1,a=function(){var l=Object(p.a)(m.a.mark((function l(){var d,f;return m.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(!r){l.next=2;break}return l.abrupt("return");case 2:return l.prev=2,t(),l.next=6,g(s);case 6:if(d=l.sent,!r){l.next=9;break}return l.abrupt("return");case 9:O(d),M(f={image:d,info:{nickname:n,message:c,liveMode:i,micOn:o,speakerOn:u}}),T.current=f,l.next=19;break;case 16:l.prev=16,l.t0=l.catch(2),x(l.t0);case 19:e=setTimeout(a,12e4);case 20:case"end":return l.stop()}}),l,null,[[2,16]])})));return function(){return l.apply(this,arguments)}}();return a(),function(){r=!0,clearTimeout(e)}}),[e,t,s,n,c,i,o,u,M]),{myImage:b,roomImages:E}}(t,n,i,o,u,s,f,v),x=O.myImage,T=O.roomImages,M=function(e,t,n,c,i,o,u){var s=Object(a.useState)(null),l=Object(r.a)(s,2),f=l[0],v=l[1],b=Object(a.useState)({}),O=Object(r.a)(b,2),g=O[0],h=O[1],S=Object(a.useRef)(!0);Object(a.useEffect)((function(){return function(){S.current=!1}}),[]);var x=Object(a.useCallback)(function(){var e=Object(p.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0="video"===t.kind,!e.t0){e.next=5;break}return e.next=4,Object(I.c)(t);case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return");case 7:r=function(e){S.current&&h((function(t){var r=n.userId,a=t[r],c=Object(y.a)(t,[r].map(E.a));return a===e?c:t}))},h((function(e){var a=e[n.userId],c=C(t,a,r);return a===c?e:Object(d.a)(Object(d.a)({},e),{},Object(j.a)({},n.userId,c))}));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),T=Object(k.c)(e,t,x,n?"faceVideo":void 0),M=T.addTrack,N=T.removeTrack,A=Object(k.c)(e,t,x,c?"faceAudio":void 0),L=A.addTrack,D=A.removeTrack;return Object(a.useEffect)((function(){var e=null;return n&&M&&N&&Object(p.a)(m.a.mark((function t(){var n,a,c,i,u,s,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(I.a)(o);case 2:n=t.sent,a=n.stream,c=n.dispose,i=a.getVideoTracks(),u=Object(r.a)(i,1),s=u[0],M(s),l=function(e){S.current&&v((function(t){return t===e?null:t}))},v((function(e){return C(s,e,l)})),e=function(){N(s),c(),s.dispatchEvent(new Event("ended"))};case 10:case"end":return t.stop()}}),t)})))(),function(){e&&e()}}),[e,n,o,M,N]),Object(a.useEffect)((function(){var e=null;return c&&L&&D&&Object(p.a)(m.a.mark((function t(){var n,a,c,i,o,s,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(u);case 2:n=t.sent,a=n.stream,c=n.dispose,i=a.getAudioTracks(),o=Object(r.a)(i,1),s=o[0],L(s),l=function(e){S.current&&v((function(t){return t===e?null:t}))},v((function(e){return C(s,e,l)})),e=function(){D(s),c(),s.dispatchEvent(new Event("ended"))};case 10:case"end":return t.stop()}}),t)})))(),function(){e&&e()}}),[e,c,u,L,D]),Object(a.useEffect)((function(){if(f){f.getAudioTracks().forEach((function(e){e.enabled=i}));var e=function(e){var t=e.track;"audio"===t.kind&&(t.enabled=i)};return f.addEventListener("addtrack",e),function(){f.removeEventListener("addtrack",e)}}}),[f,i]),{faceStream:f,faceStreamMap:g}}(t,n,u,u,s,v,b),N=M.faceStream,A=M.faceStreamMap;return c.a.createElement(c.a.Fragment,null,c.a.createElement(S,{image:x,nickname:i,statusMesg:o,liveMode:u,stream:N||void 0,muted:!0}),T.map((function(e){return c.a.createElement(S,{key:e.userId,image:e.image,nickname:e.info.nickname,statusMesg:e.info.message,obsoleted:e.obsoleted,liveMode:e.info.liveMode,stream:u&&A[e.userId]||void 0,muted:!f,micOn:e.info.micOn,speakerOn:e.info.speakerOn})})))})),T=n(67),M=n.n(T),N=(n(68),n(5)),A=function(e){return Array.isArray(e)&&2===e.length&&"string"===typeof e[0]&&"number"===typeof e[1]},L=function(e){return Object(v.a)(e)&&"string"===typeof e.messageId&&"string"===typeof e.nickname&&"number"===typeof e.createdAt&&"string"===typeof e.text&&function(e){return Array.isArray(e)&&e.every(A)}(e.replies)&&"string"===typeof e.time},D=function(e,t){var n=t[1]-e[1];return 0===n?e[0].length-t[0].length:n},P=function(e,t,n){var c=Object(a.useState)([]),i=Object(r.a)(c,2),o=i[0],u=i[1],s=Object(a.useRef)(o);Object(a.useEffect)((function(){s.current=o}));var f=Object(a.useCallback)((function(e){if(e.chatInReplyTo){var t=e.chatText,n=e.chatInReplyTo;u((function(e){return e.map((function(e){if(e.messageId===n){var r=new Map(e.replies);r.set(t,(r.get(t)||0)+1);var a=Object(l.a)(r.entries());return a.sort(D),Object(d.a)(Object(d.a)({},e),{},{replies:a})}return e}))}))}else{var r={messageId:e.messageId,nickname:e.nickname,createdAt:e.createdAt,text:e.chatText,replies:[],time:new Date(e.createdAt).toLocaleString().split(" ")[1].slice(0,-3)};u((function(e){if(e.some((function(e){return e.messageId===r.messageId})))return e;var t=[r].concat(Object(l.a)(e));return t.length>100&&t.pop(),t.sort((function(e,t){return t.createdAt-e.createdAt})),t}))}}),[]);Object(k.e)(e,t,Object(a.useCallback)(Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.current);case 1:case"end":return e.stop()}}),e)}))),[]));var b=Object(k.a)(e,t);Object(k.b)(e,t,Object(a.useCallback)((function(e){var t;t=e,!Object(v.a)(t)||"string"!==typeof t.userId||"string"!==typeof t.nickname||"string"!==typeof t.messageId||"number"!==typeof t.createdAt||"string"!==typeof t.chatText||"undefined"!==typeof t.chatInReplyTo&&"string"!==typeof t.chatInReplyTo?function(e){return Array.isArray(e)&&e.every(L)}(e)&&u((function(t){return 0===t.length?e:t})):f(e)}),[f]));var O=Object(a.useCallback)((function(e){var r={userId:t,nickname:n,messageId:Object(N.f)(),createdAt:Date.now(),chatText:e};b(r),f(r)}),[b,t,n,f]),g=Object(a.useCallback)((function(e,r){var a={userId:t,nickname:n,messageId:Object(N.f)(),createdAt:Date.now(),chatText:e,chatInReplyTo:r};b(a),f(a)}),[b,t,n,f]);return{chatList:o,sendChat:O,replyChat:g}},R=(n(69),n(48)),U=R.b,_=n(73),F=n.n(_),W=n(75),V=n.n(W),z=(n(90),{toolbar:["specialCharacters","|","bold","italic","link","blockQuote","|","imageUpload","insertTable","mediaEmbed","|","undo","redo"],balloonToolbar:["heading","|","bulletedList","numberedList","indent","outdent"],link:{addTargetToExternalLinks:!0}}),B=c.a.memo((function(e){var t=e.registerClear,n=e.onChange;return c.a.createElement(F.a,{editor:V.a,config:z,onInit:function(e){t((function(){e.setData("")})),function(e){e.plugins.get("SpecialCharacters").addItems("Emoji",[{title:"smiley face",character:"\ud83d\ude0a"},{title:"rocket",character:"\ud83d\ude80"},{title:"wind blowing face",character:"\ud83c\udf2c\ufe0f"},{title:"floppy disk",character:"\ud83d\udcbe"},{title:"heart",character:"\u2764\ufe0f"}])}(e)},onChange:function(e,t){var r=t.getData();n(r)}})})),H=c.a.memo((function(e){var t,n=e.item,i=e.replyChat,o=Object(a.useState)(!1),u=Object(r.a)(o,2),s=u[0],l=u[1],d=function(e){return i(e,n.messageId)};return c.a.createElement("li",{key:n.messageId,className:"MomentaryChat-listPart"},s&&c.a.createElement(U,{onSelect:function(e){d(e.native),l(!1)},style:{width:"100%"}}),c.a.createElement("div",{className:"MomentaryChat-listPart-header"},c.a.createElement("div",{className:"MomentaryChat-iconButton-container"},c.a.createElement("div",{className:"MomentaryChat-iconButton"},c.a.createElement("button",{type:"button",onClick:function(){l(!s)}},"+"))),c.a.createElement("span",{className:"MomentaryChat-nickname"},n.nickname||"No Name"),c.a.createElement("span",{className:"MomentaryChat-time"},n.time)),c.a.createElement("div",{className:"MomentaryChat-text ck-content",dangerouslySetInnerHTML:(t=n.text,{__html:M.a.sanitize(t,{ADD_ATTR:["target"]})})}),n.replies.map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return c.a.createElement("button",{key:n,className:"MomentaryChat-icon",type:"button",onClick:function(){return d(n)}},n," ",a)})))})),G=c.a.memo((function(e){var t,n=e.chatList,r=e.replyChat,i=Object(a.useRef)(null),o=null===(t=n[0])||void 0===t?void 0:t.messageId;return Object(a.useEffect)((function(){i.current&&o&&(i.current.scrollTop=i.current.scrollHeight)}),[o]),c.a.createElement("ul",{className:"MomentaryChat-list",ref:i},n.map((function(e){return c.a.createElement(H,{key:e.messageId,item:e,replyChat:r})})))})),J=c.a.memo((function(e){var t=e.roomId,n=e.userId,i=e.nickname,o=Object(a.useRef)(null),u=P(t,n,i),s=u.chatList,l=u.sendChat,d=u.replyChat,f=Object(a.useRef)(),m=Object(a.useState)(""),p=Object(r.a)(m,2),v=p[0],b=p[1];return c.a.createElement("div",{className:"MomentaryChat-container",ref:o},c.a.createElement(G,{chatList:s,replyChat:d}),c.a.createElement("div",{className:"MomentaryChat-editor"},c.a.createElement(B,{registerClear:function(e){f.current=e},onChange:b})),c.a.createElement("div",{className:"MomentaryChat-button"},c.a.createElement("button",{type:"button",onClick:function(){v&&(l(v),b(""),f.current&&f.current())},disabled:!v},"Send")))})),K=(n(91),c.a.memo((function(e){var t=e.liveMode,n=e.setLiveMode,r=e.micOn,a=e.setMicOn,i=e.speakerOn,o=e.setSpeakerOn,u=e.secondColumnOpen,s=e.setSecondColumnOpen;return c.a.createElement("div",{className:"ControlPanel-container"},c.a.createElement("button",{type:"button",onClick:function(){return n((function(e){return!e}))},title:t?"Disable Live Mode":"Enable Live Mode"},"\ud83c\udfa5",!t&&c.a.createElement("span",{className:"ControlPanel-disabled"},"\u274c")),c.a.createElement("button",{type:"button",onClick:function(){return s((function(e){return!e}))},title:u?"Close Right Pane":"Open Right Pane"},u?c.a.createElement(c.a.Fragment,null,"\u25c0"):c.a.createElement(c.a.Fragment,null,"\u25b6")),c.a.createElement("button",{type:"button",onClick:function(){return a((function(e){return!e}))},title:r?"Disable Mic":"Enable Mic"},"\ud83c\udfa4",!r&&c.a.createElement("span",{className:"ControlPanel-disabled"},"\u274c")),c.a.createElement("button",{type:"button",onClick:function(){return o((function(e){return!e}))},title:i?"Disable Speaker":"Enable Speaker"},c.a.createElement(c.a.Fragment,null,"\ud83d\udd08"),!i&&c.a.createElement("span",{className:"ControlPanel-disabled"},"\u274c")))}))),Q=(n(92),n(61)),Y="true"!==u("config_hidden"),Z="remote-faces://".concat(window.location.href.replace(/^https:\/\//,"")),q=c.a.memo((function(e){var t=e.initialText,n=e.onUpdate,i=e.buttonLabel,o=e.placeholder,u=e.clearOnUpdate,s=Object(a.useState)(t),l=Object(r.a)(s,2),d=l[0],f=l[1];return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),d&&(n(d),u&&f(""))}},c.a.createElement("input",{value:d,onChange:function(e){return f(e.target.value)},placeholder:o}),i&&c.a.createElement("button",{type:"submit",disabled:!d},i))})),X=c.a.memo((function(e){var t=e.roomId,n=e.userId,i=e.nickname,u=e.setNickname,s=e.videoDeviceId,l=e.setVideoDeviceId,d=e.audioDeviceId,f=e.setAudioDeviceId,m=Object(a.useState)(Y),p=Object(r.a)(m,2),v=p[0],b=p[1];Object(a.useEffect)((function(){o("config_hidden",v?"false":"true")}),[v]);var O=Object(Q.b)(),g=Object(Q.a)(),h=Object(k.d)(t,n);return c.a.createElement("div",{className:"SettingPanel-container"},c.a.createElement("button",{type:"button",className:"SettingPanel-config-toggle",onClick:function(){return b((function(e){return!e}))}},"Setting",v?c.a.createElement(c.a.Fragment,null,"\u25bc"):c.a.createElement(c.a.Fragment,null,"\u25b6")),v&&c.a.createElement("div",{className:"SettingPanel-config"},c.a.createElement("div",{className:"SettingPanel-config-row"},c.a.createElement("span",{title:"Share this link with your colleagues"},"Room Link:"," "),c.a.createElement("input",{value:window.location.href,readOnly:!0})," ",c.a.createElement("a",{href:Z,title:"Open this link in the desktop app"},"Open App")),c.a.createElement("div",{className:"SettingPanel-config-row"},"Your Name:"," ",c.a.createElement(q,{initialText:i,onUpdate:function(e){u(e),o("nickname",e)},placeholder:"Enter your name",buttonLabel:"Set"})),c.a.createElement("div",{className:"SettingPanel-config-row"},"Select Camera:"," ",c.a.createElement("select",{value:s,onChange:function(e){l(e.target.value),o("faceimage_video_device_id",e.target.value)}},O.map((function(e){return c.a.createElement("option",{key:e.deviceId,value:e.deviceId},e.label)})))),c.a.createElement("div",{className:"SettingPanel-config-row"},"Select Mic:"," ",c.a.createElement("select",{value:d,onChange:function(e){f(e.target.value),o("faceimage_audio_device_id",e.target.value)}},g.map((function(e){return c.a.createElement("option",{key:e.deviceId,value:e.deviceId},e.label)})))),c.a.createElement("div",{className:"SettingPanel-status"},JSON.stringify(h))))})),$=(n(93),c.a.memo((function(e){var t=e.initialText,n=e.onUpdate,i=e.buttonLabel,o=e.placeholder,u=e.clearOnUpdate,s=Object(a.useState)(t),l=Object(r.a)(s,2),d=l[0],f=l[1];return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),d&&(n(d),u&&f(""))}},c.a.createElement("input",{value:d,onChange:function(e){return f(e.target.value)},placeholder:o}),i&&c.a.createElement("button",{type:"submit",disabled:!d},i))}))),ee=c.a.memo((function(e){var t=e.emoji,n=e.setEmoji,i=e.setStatusMesg,o=Object(a.useState)(!1),u=Object(r.a)(o,2),s=u[0],l=u[1];return c.a.createElement("div",{className:"UserStatus-container"},c.a.createElement("div",{className:"UserStatus-status-area"},c.a.createElement("div",{className:"UserStatus-emoji"},c.a.createElement("button",{type:"button",onClick:function(){l(!s)}},t?c.a.createElement(R.a,{emoji:t,size:10}):":)")),t&&c.a.createElement("div",{className:"UserStatus-statusmesg"},c.a.createElement($,{initialText:"",onUpdate:i,placeholder:"Enter status message...",buttonLabel:"Set"})),c.a.createElement("button",{type:"button",onClick:function(){n(null),i(""),l(!1)},disabled:!t},"Clear")),s&&c.a.createElement(U,{onSelect:function(e){n(e),l(!1)},style:{width:"100%"}}))})),te=(n(94),{Welcome:c.a.lazy((function(){return n.e(10).then(n.bind(null,103))})),"Screen Share":c.a.lazy((function(){return n.e(8).then(n.bind(null,105))})),"Video Share":c.a.lazy((function(){return n.e(9).then(n.bind(null,106))})),"White Board":c.a.lazy((function(){return n.e(5).then(n.bind(null,107))})),"Go Board":c.a.lazy((function(){return Promise.all([n.e(11),n.e(6)]).then(n.bind(null,108))}))}),ne=c.a.memo((function(e){var t=e.roomId,n=e.userId,i=e.nickname,o=Object(a.useState)("Welcome"),u=Object(r.a)(o,2),s=u[0],l=u[1];return c.a.createElement("div",{className:"SelectivePane-container"},c.a.createElement("div",{className:"SelectivePane-select"},"\u2630",c.a.createElement("select",{value:s,onChange:function(e){return l(e.target.value)}},Object.keys(te).map((function(e){return c.a.createElement("option",{key:e,value:e},e)})))),Object(a.createElement)(te[s],{roomId:t,userId:n,nickname:i}))})),re=u("nickname"),ae=u("faceimage_video_device_id"),ce=u("faceimage_audio_device_id"),ie=c.a.memo((function(e){var t=e.roomId,n=e.userId,o=Object(a.useState)(re),u=Object(r.a)(o,2),l=u[0],d=u[1],f=Object(a.useState)(""),m=Object(r.a)(f,2),p=m[0],v=m[1],b=Object(a.useState)(null),O=Object(r.a)(b,2),g=O[0],k=O[1];Object(a.useEffect)((function(){Object(i.e)(t)}),[t]);var h=Object(a.useState)(ae),j=Object(r.a)(h,2),y=j[0],E=j[1],I=Object(a.useState)(ce),w=Object(r.a)(I,2),C=w[0],S=w[1],T=Object(a.useState)(!1),M=Object(r.a)(T,2),N=M[0],A=M[1],L=Object(a.useState)(!1),D=Object(r.a)(L,2),P=D[0],R=D[1],U=Object(a.useState)(!1),_=Object(r.a)(U,2),F=_[0],W=_[1],V=Object(a.useState)(!0),z=Object(r.a)(V,2),B=z[0],H=z[1],G=Object(a.useState)(!0),Q=Object(r.a)(G,2),Y=Q[0],Z=Q[1];return Object(s.a)(t,n),c.a.createElement("div",{className:"SingleRoom-container"},c.a.createElement("div",{className:"SingleRoom-1st-column"},c.a.createElement(K,{liveMode:N,setLiveMode:A,micOn:P,setMicOn:R,speakerOn:F,setSpeakerOn:W,secondColumnOpen:B,setSecondColumnOpen:H}),c.a.createElement(x,{roomId:t,userId:n,videoDeviceId:y,audioDeviceId:C,nickname:l,statusMesg:"".concat((null===g||void 0===g?void 0:g.native)||" ").concat(p),liveMode:N,micOn:P,speakerOn:F})),c.a.createElement("div",{className:"SingleRoom-2nd-column",style:{width:B?"inherit":"0"}},c.a.createElement("button",{type:"button",className:"SingleRoom-toggle-3rd-column",onClick:function(){return Z((function(e){return!e}))},title:Y?"Close Right Pane":"Open Right Pane"},Y?c.a.createElement(c.a.Fragment,null,"\u25c0"):c.a.createElement(c.a.Fragment,null,"\u25b6")),c.a.createElement(ee,{emoji:g,setEmoji:k,setStatusMesg:v}),c.a.createElement(X,{roomId:t,userId:n,nickname:l,setNickname:d,videoDeviceId:y,setVideoDeviceId:E,audioDeviceId:C,setAudioDeviceId:S}),c.a.createElement(J,{roomId:t,userId:n,nickname:l})),c.a.createElement("div",{className:"SingleRoom-3rd-column",style:{display:Y?"inherit":"none"}},c.a.createElement(ne,{roomId:t,userId:n,nickname:l})))}));t.default=ie},34:function(e,t,n){"use strict";n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return y})),n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return I})),n.d(t,"c",(function(){return w}));var r=n(1),a=n.n(r),c=n(2),i=n(3),o=n(0),u=n(37),s=n(64),l=n.n(s),d=n(40),f=n(5),m=n(4),p=n(38),v=n(8),b=new WeakMap,O=function(e,t){if(b.has(e))return e;b.set(e,!0);var n=function(){var n=Object(c.a)(a.a.mark((function n(){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(d.a)(5e3);case 2:!(r=t.getTransceivers().find((function(t){return t.receiver.track===e})))||"inactive"!==r.currentDirection&&"sendonly"!==r.currentDirection||(e.stop(),e.dispatchEvent(new Event("ended")));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return e.addEventListener("mute",n),e},g=function(e){var t=Object(v.e)(e);return 10<=t&&t<=14},k=new Map,h=function(e,t,n){var r="".concat(e,"_").concat(t),i=k.get(r);if(!i){var o=new Set,s=new Set,b=new Set,h=new Set;i={room:function(e,t,n,r,i,o){var s=!1,b=null,k=Object(v.b)(),h=[],j=null,y=function(){if(!s){var e=k.getConnectedPeerIds().map(v.e);n({type:"CONNECTED_PEERS",peerIndexList:e})}},E=function(e){if(!s&&b&&b.id!==e&&!b.disconnected&&!k.hasConn(e)){console.log("connectPeer",e);var t=b.connect(e);A(t)}},I=function(e){if(!s){var n=k.getConnectedPeerIds();k.forEachConnectedConns((function(r){N(r,{userId:t,data:e,peers:n,mediaTypes:h})}))}},w=function(e,t){N(e,{SDP:t})},C=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(p.a)(n)){e.next=2;break}return e.abrupt("return");case 2:if(!Object(p.a)(n.offer)){e.next=21;break}return r=n.offer,e.prev=4,e.next=7,t.peerConnection.setRemoteDescription(r);case 7:return R(t),e.next=10,t.peerConnection.createAnswer();case 10:return c=e.sent,e.next=13,t.peerConnection.setLocalDescription(c);case 13:w(t,{answer:c}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),console.info("handleSDP offer failed",e.t0);case 19:e.next=38;break;case 21:if(!Object(p.a)(n.answer)){e.next=37;break}return i=n.answer,e.prev=23,e.next=26,t.peerConnection.setRemoteDescription(i);case 26:e.next=35;break;case 28:return e.prev=28,e.t1=e.catch(23),console.info("handleSDP answer failed",e.t1),e.next=33,Object(d.a)(30*Math.random()*1e3);case 33:U(t),R(t);case 35:e.next=38;break;case 37:console.warn("unknown SDP",n);case 38:case"end":return e.stop()}}),e,null,[[4,16],[23,28]])})));return function(t,n){return e.apply(this,arguments)}}(),S=function(e,t){"string"===typeof t&&k.setUserId(e,t)},x=function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(n)||!n.every((function(e){return"string"===typeof e}))){e.next=5;break}return k.setMediaTypes(t,n),e.next=4,Object(d.a)(5e3);case 4:R(t);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(e,t){var n=k.getUserId(e);if(n){var r={userId:n,peerIndex:Object(v.d)(e),mediaTypes:k.getMediaTypes(e)};try{i(t,r)}catch(a){console.warn("receiveData",a)}}},M=function(){var t=Object(c.a)(a.a.mark((function t(n,r){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.t0=JSON,t.next=6,Object(f.a)(r,e.slice(v.a));case 6:if(t.t1=t.sent,c=t.t0.parse.call(t.t0,t.t1),console.log("decrypted payload",n.peer,c),Object(p.a)(c)){t.next=11;break}return t.abrupt("return");case 11:C(n,c.SDP),S(n,c.userId),x(n,c.mediaTypes),a=c.peers,Array.isArray(a)&&a.forEach((function(t){Object(v.f)(e,t)&&E(t)})),T(n,c.data),t.next=21;break;case 18:t.prev=18,t.t2=t.catch(2),console.info("Error in handlePayload",t.t2,r);case 21:case"end":return t.stop()}var a}),t,null,[[2,18]])})));return function(e,n){return t.apply(this,arguments)}}(),N=function(){var t=Object(c.a)(a.a.mark((function t(n,r){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(f.b)(JSON.stringify(r),e.slice(v.a));case 3:c=t.sent,n.send(c),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("sendPayload",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}(),A=function(e){if(k.isConnected(e.peer))e.close();else{k.addConn(e),e.on("open",(function(){k.markConnected(e),console.log("dataConnection open",e),y();var t=Object(v.e)(e.peer);r(t)})),e.on("data",(function(t){return M(e,t)})),e.peerConnection.addEventListener("icegatheringstatechange",(function(){var t=e.peerConnection;"complete"===t.iceGatheringState&&(t.onicecandidate=function(){})}));var t=new WeakMap;e.peerConnection.addEventListener("negotiationneeded",Object(c.a)(a.a.mark((function n(){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.has(e)){n.next=2;break}return n.abrupt("return");case 2:return t.set(e,!0),n.next=5,Object(d.a)(2e3);case 5:if(t.delete(e),k.isConnected(e.peer)){n.next=8;break}return n.abrupt("return");case 8:return n.next=10,e.peerConnection.createOffer();case 10:return r=n.sent,n.next=13,e.peerConnection.setLocalDescription(r);case 13:w(e,{offer:r});case 14:case"end":return n.stop()}}),n)})))),e.peerConnection.addEventListener("track",(function(t){var n=k.getUserId(e);if(n){var r={userId:n,peerIndex:Object(v.e)(e.peer),mediaTypes:k.getMediaTypes(e)};o(O(t.track,e.peerConnection),r)}})),e.on("close",(function(){if(k.delConn(e),console.log("dataConnection closed",e),n({type:"CONNECTION_CLOSED",peerIndex:Object(v.d)(e)}),y(),0===k.getConnectedPeerIds().length)D(!0);else if(g(e.peer)&&b&&!b.disconnected&&!g(b.id)){var t=30+Math.floor(60*Math.random());console.log("Disconnected seed peer: ".concat(Object(v.e)(e.peer),", reinit in ").concat(t,"sec...")),setTimeout(D,1e3*t)}}))}},L=function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;if(!s&&!b){k.clearAll();var a=10<=r&&r<=14,c=a?r:Object(f.e)();n({type:"INITIALIZING_PEER",peerIndex:c});var i=Object(v.c)(e,c);console.log("initMyPeer start",r,i);var o=new l.a(i,Object(u.a)(Object(u.a)({},Object(m.d)()||{}),{},{debug:3}));b=o,o.on("open",(function(){b=o,n({type:"CONNECTING_SEED_PEERS"});for(var t=10;t<=14;t+=1){var r=Object(v.c)(e,t);E(r)}})),o.on("error",(function(e){"unavailable-id"===e.type?(b=null,o.destroy(),t(r+1)):"peer-unavailable"===e.type||("disconnected"===e.type?(console.log("initMyPeer disconnected error",r,e),o.destroy()):"network"===e.type?console.log("initMyPeer network error",r,e):"server-error"===e.type?(console.log("initMyPeer server error",r,e),n({type:"SERVER_ERROR"})):(console.error("initMyPeer unknown error",r,e.type,e),n({type:"UNKNOWN_ERROR",err:e})))})),o.on("connection",(function(e){b===o?(console.log("new connection received",e),n({type:"NEW_CONNECTION",peerIndex:Object(v.d)(e)}),A(e)):e.close()})),o.on("disconnected",(function(){console.log("initMyPeer disconnected",r),setTimeout((function(){b!==o||o.destroyed||(console.log("initMyPeer reconnecting",r),n({type:"RECONNECTING"}),o.reconnect())}),5e3)})),o.on("close",(function(){b===o?(console.log("initMyPeer closed, re-initializing",r),b=null,setTimeout(t,2e4)):console.log("initMyPeer closed, ignoring",r)}))}};L();var D=function(t){if(b&&!b.disconnected){if(!t){if(g(b.id))return;for(var n=!0,r=10;r<=14;r+=1){var a=Object(v.c)(e,r);if(!k.isConnected(a)){n=!1;break}}if(n)return void y()}var c=b;b=null,c.destroy(),L()}},P=new WeakMap,R=function(e){var t=e.peerConnection.getSenders(),n=k.getMediaTypes(e);j&&j.getTracks().forEach((function(r){var a=P.get(r);j&&a&&n.includes(a)&&t.every((function(e){return e.track!==r}))&&e.peerConnection.addTrack(r,j)})),t.forEach((function(t){if(t.track){var r=P.get(t.track);r&&n.includes(r)||e.peerConnection.removeTrack(t)}})),t.some((function(e){return e.track&&!e.transport}))&&e.peerConnection.dispatchEvent(new Event("negotiationneeded"))},U=function(e){e.peerConnection.getSenders().forEach((function(t){t.track&&e.peerConnection.removeTrack(t)}))};return{broadcastData:I,sendData:function(n,r){if(!s){var a=k.getConn(Object(v.c)(e,r));if(a){var c=k.getConnectedPeerIds();N(a,{userId:t,data:n,peers:c,mediaTypes:h})}}},acceptMediaTypes:function(e){(h=e).length?j||(j=new MediaStream,k.forEachConnectedConns((function(e){var t=k.getUserId(e);if(t){var n={userId:t,peerIndex:Object(v.e)(e.peer),mediaTypes:k.getMediaTypes(e)};e.peerConnection.getReceivers().forEach((function(t){"live"===t.track.readyState&&o(O(t.track,e.peerConnection),n)}))}}))):j=null,I(null)},addTrack:function(e,t){j&&(P.set(t,e),j.addTrack(t),k.forEachConnsAcceptingMedia(e,(function(e){try{if(!j)return;e.peerConnection.addTrack(t,j)}catch(n){if("InvalidAccessError"!==n.name)throw n}})))},removeTrack:function(e,t){j&&j.removeTrack(t),k.forEachConnsAcceptingMedia(e,(function(e){var n=e.peerConnection.getSenders().find((function(e){return e.track===t}));n&&e.peerConnection.removeTrack(n)}))},dispose:function(){s=!0,b&&b.destroy()}}}(e,t,(function(e){o.forEach((function(t){t(e)}))}),(function(e){s.forEach((function(t){t(e)}))}),(function(e,t){b.forEach((function(n){n(e,t)}))}),(function(e,t){h.forEach((function(n){(0,n.listener)(e,t)}))})),networkStatusListeners:o,newPeerListeners:s,dataListeners:b,trackListeners:h,count:0},k.set(r,i)}if(n.networkStatusListener&&i.networkStatusListeners.add(n.networkStatusListener),n.newPeerListener&&i.newPeerListeners.add(n.newPeerListener),n.dataListener&&i.dataListeners.add(n.dataListener),n.trackListener){var j=new Set(Array.from(i.trackListeners).map((function(e){return e.mediaType}))),y=j.size;i.trackListeners.add(n.trackListener),j.add(n.trackListener.mediaType),y!==j.size&&i.room.acceptMediaTypes(Array.from(j))}i.count+=1;var E=i;return{broadcastData:i.room.broadcastData,sendData:i.room.sendData,addTrack:i.room.addTrack,removeTrack:i.room.removeTrack,unregister:function(){if(n.networkStatusListener&&E.networkStatusListeners.delete(n.networkStatusListener),n.newPeerListener&&E.newPeerListeners.delete(n.newPeerListener),n.dataListener&&E.dataListeners.delete(n.dataListener),n.trackListener){var e=new Set(Array.from(E.trackListeners).map((function(e){return e.mediaType}))),t=e.size;E.trackListeners.delete(n.trackListener),t!==(e=new Set(Array.from(E.trackListeners).map((function(e){return e.mediaType})))).size&&E.room.acceptMediaTypes(Array.from(e))}E.count-=1,E.count<=0&&(E.room.dispose(),k.delete(r))}}},j=function(e,t,n){var r=Object(o.useState)(),a=Object(i.a)(r,2),c=a[0],u=a[1];if(c&&"UNKNOWN_ERROR"===c.type)throw new Error("Network Error: ".concat(c.err.message));return Object(o.useEffect)((function(){return h(e,t,{networkStatusListener:function(e){u(e),n&&n(e)}}).unregister}),[e,t,n]),c},y=function(e,t,n){Object(o.useEffect)((function(){var r=h(e,t,{newPeerListener:function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:null!==(r=e.sent)&&o(r,t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),i=r.unregister,o=r.sendData;return i}),[e,t,n])},E=function(e,t){var n=Object(o.useRef)(),r=Object(o.useCallback)((function(){n.current&&n.current.apply(n,arguments)}),[]);return Object(o.useEffect)((function(){var r=h(e,t,{});return n.current=r.broadcastData,r.unregister}),[e,t]),r},I=function(e,t,n){Object(o.useEffect)((function(){return h(e,t,{dataListener:n}).unregister}),[e,t,n])},w=function(e,t,n,r){var a=Object(o.useState)({}),c=Object(i.a)(a,2),u=c[0],s=c[1];return Object(o.useEffect)((function(){if(r){var a=h(e,t,{trackListener:{mediaType:r,listener:n}});return s({addTrack:function(e){return a.addTrack(r,e)},removeTrack:function(e){return a.removeTrack(r,e)}}),function(){s({}),a.unregister()}}}),[e,t,n,r]),u}},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return"object"===typeof e&&null!==e}},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return new Promise((function(t){return setTimeout(t,e)}))}},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),a=n(0),c=n(38),i=n(34),o=[],u=function(e){var t={};return o.forEach((function(n){n.roomId===e&&(t[n.userId]=n.nickname)})),t},s=function(e,t){var n=Object(a.useState)((function(){return u(e)})),s=Object(r.a)(n,2),l=s[0],d=s[1];return Object(i.b)(e,t,Object(a.useCallback)((function(t,n){if(r=t,Object(c.a)(r)&&Object(c.a)(r.info)&&"string"===typeof r.info.nickname){var r,a=o.findIndex((function(t){return t.roomId===e&&t.userId===n.userId})),i=Date.now();a>=0?(o[a].nickname!==t.info.nickname&&(o[a].nickname=t.info.nickname),o[a].lastUpdated=i):o.push({roomId:e,userId:n.userId,nickname:t.info.nickname,lastUpdated:i});for(var s=o.length-1;s>=0;s-=1)o[s].lastUpdated+6e5<i&&o.splice(s,1);d((function(t){var n=u(e),r=Object.keys(n);return r.length===Object.keys(t).length&&r.every((function(e){return n[e]===t[e]}))?t:n}))}}),[e])),l}},43:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return f}));var r=n(1),a=n.n(r),c=n(3),i=n(2),o=n(40),u=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,o,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?{video:{deviceId:t}}:{video:!0},e.next=3,navigator.mediaDevices.getUserMedia(n);case 3:return r=e.sent,i=r.getVideoTracks(),o=Object(c.a)(i,1),u=o[0],s=function(){u.stop()},e.abrupt("return",{stream:r,dispose:s});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,u,s,l,d,f,m,p,v,b,O,g,k,h,j,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?{video:{deviceId:t}}:{video:!0},e.next=3,navigator.mediaDevices.getUserMedia(n);case 3:return r=e.sent,i=r.getVideoTracks(),u=Object(c.a)(i,1),s=u[0],(l=document.getElementById("internal-video")).style.display="block",l.srcObject=r,e.next=10,Object(o.a)(1e3);case 10:return d=l.videoWidth,f=l.videoHeight,m=document.getElementById("internal-canvas"),p=m.getContext("2d"),72,72,m.width=72,m.height=72,v=Math.max(72/d,72/f),b=Math.min(d,72/v),O=Math.min(f,72/v),g=(d-b)/2,k=(f-O)/2,function e(){p.drawImage(l,g,k,b,O,0,0,72,72),h=setTimeout(e,1e3/15)}(),j=m.captureStream(),y=function(){l.style.display="none",clearTimeout(h),s.stop(),j.getVideoTracks()[0].stop()},e.abrupt("return",{stream:j,dispose:y});case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,(n=document.createElement("video")).srcObject=new MediaStream([t]),r=0;case 4:if(!(r<50)){e.next=14;break}return e.next=7,Object(o.a)(100);case 7:if(c=n.videoWidth,i=n.videoHeight,!(c>0&&i>0)){e.next=11;break}return e.abrupt("return",72===c&&72===i);case 11:r+=1,e.next=4;break;case 14:return e.abrupt("return",!0);case 17:return e.prev=17,e.t0=e.catch(0),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}(),d=new WeakMap,f=function(e){if(d.has(e))return d.get(e);var t=l(e);return d.set(e,t),t}},61:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(1),a=n.n(r),c=n(2),i=n(3),o=n(0),u=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.enumerateDevices();case 3:return t=e.sent,n=t.filter((function(e){return"videoinput"===e.kind})).map((function(e){return{label:e.label,deviceId:e.deviceId}})),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.enumerateDevices();case 3:return t=e.sent,n=t.filter((function(e){return"audioinput"===e.kind})).map((function(e){return{label:e.label,deviceId:e.deviceId}})),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(o.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(o.useEffect)((function(){Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),n},d=function(){var e=Object(o.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(o.useEffect)((function(){Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),n}},63:function(e,t,n){},65:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=65},66:function(e,t,n){},68:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){}}]);
//# sourceMappingURL=3.bd86ea3a.chunk.js.map