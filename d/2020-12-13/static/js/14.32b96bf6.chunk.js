(this["webpackJsonpremote-faces-web"]=this["webpackJsonpremote-faces-web"]||[]).push([[14],{1241:function(t,e,n){},1251:function(t,e,n){"use strict";n.r(e),n.d(e,"GoBoard",(function(){return f}));var o=n(5),r=n(0),i=n(2),c=n.n(i),a=n(512),u=(n(1241),n(95)),s=n(111),l=function(t){return Object(u.c)(t)&&function(t){return["play","pass","undo"].indexOf(t)>=0}(t.action)&&"number"===typeof t.updatedAt&&function(t){try{var e=t;return"number"===typeof e.size&&e.grid.length===e.size*e.size&&!e.grid.some((function(t){return t!==a.Color.B&&t!==a.Color.W&&t!==a.Color.E}))&&"number"===typeof e.capCount.black&&"number"===typeof e.capCount.white&&(e.turn===a.Color.B||e.turn===a.Color.W)}catch(n){return!1}}(t.position)},d=function(t,e,n){var o=Object(i.useRef)(),r=Object(s.a)(t,e),c=Object(i.useCallback)((function(t,e){var n={action:t,position:e,updatedAt:Date.now()};r({goBoard:"action",actionData:n}),o.current=n}),[r]);return Object(s.b)(t,e,Object(i.useCallback)((function(t){var e;if(e=t,Object(u.c)(e)&&("init"===e.goBoard||"action"===e.goBoard&&l(e.actionData)))if("init"!==t.goBoard){var i=t.actionData;o.current&&o.current.updatedAt>i.updatedAt||(o.current=i,n(i.action,i.position))}else o.current&&r({goBoard:"action",actionData:o.current})}),[r,n])),Object(i.useEffect)((function(){r({goBoard:"init"})}),[r]),{sendActionData:c}},b=function(t,e,n,o){var r=new a.Game(6),i=new a.CanvasBoard(t,{theme:a.themes.modernTheme,width:t.clientWidth/2,size:6}),c=[],u=null,s=function(){c=c.filter((function(t){return r.getStone(t.x,t.y)===("B"===t.type?a.Color.B:a.Color.W)||(i.removeObject(t),!1)})),u&&i.removeObject(u),u=null;for(var t=function(t){for(var e=function(e){var n=r.position.get(t,e);if(n&&!c.some((function(o){return o.x===t&&o.y===e&&n===("B"===o.type?a.Color.B:a.Color.W)}))){var o=new a.FieldObject(n===a.Color.B?"B":"W",t,e);i.addObject(o),c.push(o),null===u?(u=new a.BoardMarkupObject("SQ",t,e,n),i.addObject(u)):u&&(i.removeObject(u),u=!1)}},n=0;n<r.position.size;n+=1)e(n)},e=0;e<r.position.size;e+=1)t(e)},l=null,d=function(){l&&(i.removeObject(l),l=null)};i.on("mousemove",(function(t,e){if(e&&r.isValid(e.x,e.y)){if(l){if(l.x===e.x&&l.y===e.y)return;i.removeObject(l)}else l=new a.FieldObject(r.turn===a.Color.B?"B":"W");l.setPosition(e.x,e.y),i.addObject(l)}else d()})),i.on("mouseout",d),i.on("click",(function(t,i){var c=i.x,u=i.y;r.isValid(c,u)&&(d(),r.play(c,u),s(),e(r.turn===a.Color.B?"black":"white"),n(r.position.capCount),o("play",r.position))})),e(r.turn===a.Color.B?"black":"white");return{receiveData:function(t,o){var i=function(t){var e=new a.Position(t.size);return e.grid=t.grid,e.capCount=t.capCount,e.turn=t.turn,e}(o);r.pushPosition(i),s(),e(r.turn===a.Color.B?"black":"white"),n(r.position.capCount),d()},pass:function(){r.pass(),e(r.turn===a.Color.B?"black":"white"),o("pass",r.position)},undo:function(){r.popPosition(),s(),e(r.turn===a.Color.B?"black":"white"),n(r.position.capCount),o("undo",r.position)},resize:function(){i.setWidth(t.clientWidth/2)}}},f=c.a.memo((function(t){var e=t.roomId,n=t.userId,c=Object(i.useRef)(),a=Object(i.useCallback)((function(t,e){c.current&&c.current.receiveData(t,e)}),[]),u=d(e,n,a).sendActionData,s=Object(i.useState)("black"),l=Object(o.a)(s,2),f=l[0],p=l[1],j=Object(i.useState)({black:0,white:0}),O=Object(o.a)(j,2),v=O[0],C=O[1],h=Object(i.useRef)(null);Object(i.useEffect)((function(){if(h.current){var t=h.current,e=b(t,p,C,u);return c.current=e,window.addEventListener("resize",e.resize),function(){window.removeEventListener("resize",e.resize)}}}),[u]);return Object(r.jsxs)("div",{className:"GoBoard-container",children:[Object(r.jsxs)("div",{className:"GoBoard-toolbar",children:["Next Turn: ","black"===f?"Black":"White",Object(r.jsx)("button",{type:"button",onClick:function(){c.current&&c.current.pass()},children:"Pass"}),Object(r.jsx)("button",{type:"button",onClick:function(){c.current&&c.current.undo()},children:"Undo"}),Object(r.jsxs)("div",{children:["Capture Count: Black ",v.black,", White ",v.white]})]}),Object(r.jsx)("div",{className:"GoBoard-canvas",ref:h})]})}));e.default=f}}]);
//# sourceMappingURL=14.32b96bf6.chunk.js.map