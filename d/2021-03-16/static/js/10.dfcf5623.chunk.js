(this["webpackJsonpremote-faces-web"]=this["webpackJsonpremote-faces-web"]||[]).push([[10],{126:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"h",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"g",(function(){return o})),n.d(e,"f",(function(){return a})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return s}));var r=Math.floor,i=(Math.ceil,Math.abs),c=(Math.imul,Math.round),u=Math.log10,o=(Math.log2,Math.log,Math.sqrt,function(t,e){return t<e?t:e}),a=function(t,e){return t>e?t:e},l=(Number.isNaN,Math.pow,function(t){return Math.pow(10,t)}),s=(Math.sign,function(t){return 0!==t?t<0:1/t<0})},1267:function(t,e,n){"use strict";n.d(e,"a",(function(){return St})),n.d(e,"b",(function(){return Jt})),n.d(e,"c",(function(){return Ft}));var r,i,c=n(13),u=n(16),o=n(2),a=(n(27),n(24)),l=n(4),s=n(95),f=n(21),h=n(330),d=n(18),v=n(20),g=n(22),b=n(23),y=n(174),k=function(){return new Set},p=function(t){return t[t.length-1]},O=function(t,e){for(var n=0;n<e.length;n++)t.push(e[n])},w=Array.from,j=function(){function t(){Object(v.a)(this,t),this._observers=y.c()}return Object(f.a)(t,[{key:"on",value:function(t,e){y.e(this._observers,t,k).add(e)}},{key:"once",value:function(t,e){var n=this;this.on(t,(function r(){n.off(t,r),e.apply(void 0,arguments)}))}},{key:"off",value:function(t,e){var n=this._observers.get(t);void 0!==n&&(n.delete(e),0===n.size&&this._observers.delete(t))}},{key:"emit",value:function(t,e){return w((this._observers.get(t)||y.c()).values()).forEach((function(t){return t.apply(void 0,Object(c.a)(e))}))}},{key:"destroy",value:function(){this._observers=y.c()}}]),t}(),m=n(126),_=n(534),S=n(335),E=("undefined"===typeof window||"undefined"!==typeof window.performance&&window.performance,"undefined"===typeof crypto?null:crypto),D=null!==E?function(t){var e=new ArrayBuffer(t),n=new Uint8Array(e);return E.getRandomValues(n),e}:function(t){for(var e=new ArrayBuffer(t),n=new Uint8Array(e),r=0;r<t;r++)n[r]=Math.ceil(4294967295*Math.random()>>>0);return e},C=(Math.random,function(){return new Uint32Array(D(4))[0]}),A=[1e7]+-1e3+-4e3+-8e3+-1e11,M=function(){return A.replace(/[018]/g,(function(t){return(t^C()&15>>t/4).toString(16)}))},I=n(235),N=function(t){return new Error(t)},x=function(){throw N("Method unimplemented")},L=function(){throw N("Unexpected case")},T=n(203),R=(Object.assign,Object.keys),U=function(t){return R(t).length},P=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},J=function(t,e){return t===e||U(t)===U(e)&&function(t,e){for(var n in t)if(!e(t[n],n))return!1;return!0}(t,(function(t,n){return(void 0!==t||P(e,n))&&e[n]===t}))},V=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{for(;r<e.length;r++)e[r].apply(e,Object(c.a)(n))}finally{r<e.length&&t(e,n,r+1)}},F=n(334),W=Symbol,B=function t(e,n){Object(v.a)(this,t),this.left=e,this.right=n},K=function(t,e){return new B(t,e)},H="undefined"!==typeof document?document:{},z=("undefined"!==typeof DOMParser&&new DOMParser,function(t){return y.d(t,(function(t,e){return"".concat(e,":").concat(t,";")})).join("")}),q=(H.ELEMENT_NODE,H.TEXT_NODE,H.CDATA_SECTION_NODE,H.COMMENT_NODE,H.DOCUMENT_NODE,H.DOCUMENT_TYPE_NODE,H.DOCUMENT_FRAGMENT_NODE,JSON.stringify,JSON.parse,function(t){return function(){function e(t){Object(v.a)(this,e),this._=t}return Object(f.a)(e,[{key:"destroy",value:function(){t(this._)}}]),e}()}),G=(q(clearTimeout),q(clearInterval),q((function(t){return"undefined"!==typeof requestAnimationFrame&&cancelAnimationFrame(t)})),q((function(t){return"undefined"!==typeof cancelIdleCallback&&cancelIdleCallback(t)})),Date.now),X=W(),Y=W(),Z=W(),Q=W(),$=W(),tt=W(),et=W(),nt=W(),rt=W(),it=(r={},Object(u.a)(r,X,K("font-weight","bold")),Object(u.a)(r,Y,K("font-weight","normal")),Object(u.a)(r,Z,K("color","blue")),Object(u.a)(r,$,K("color","green")),Object(u.a)(r,Q,K("color","grey")),Object(u.a)(r,tt,K("color","red")),Object(u.a)(r,et,K("color","purple")),Object(u.a)(r,nt,K("color","orange")),Object(u.a)(r,rt,K("color","black")),r),ct=(i={},Object(u.a)(i,X,"\x1b[1m"),Object(u.a)(i,Y,"\x1b[2m"),Object(u.a)(i,Z,"\x1b[34m"),Object(u.a)(i,$,"\x1b[32m"),Object(u.a)(i,Q,"\x1b[37m"),Object(u.a)(i,tt,"\x1b[31m"),Object(u.a)(i,et,"\x1b[35m"),Object(u.a)(i,nt,"\x1b[38;5;208m"),Object(u.a)(i,rt,"\x1b[0m"),i),ut=F.c?function(t){for(var e=[],n=[],r=0;r<t.length;r++){var i=t[r],c=ct[i];if(void 0!==c)e.push(c);else{if(i.constructor!==String&&i.constructor!==Number)break;e.push(i)}}for(r>0&&(e.push("\x1b[0m"),n.push(e.join("")));r<t.length;r++){var u=t[r];u instanceof Symbol||n.push(u)}return n}:function(t){for(var e=[],n=[],r=y.c(),i=[],c=0;c<t.length;c++){var u=t[c],o=it[u];if(void 0!==o)r.set(o.left,o.right);else{if(u.constructor!==String&&u.constructor!==Number)break;var a=z(r);c>0||a.length>0?(e.push("%c"+u),n.push(a)):e.push(u)}}for(c>0&&(i=n).unshift(e.join(""));c<t.length;c++){var l=t[c];l instanceof Symbol||i.push(l)}return i},ot=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=console).log.apply(t,Object(c.a)(ut(n))),at.forEach((function(t){return t.print(n)}))},at=new Set,lt=(G(),function(t){var e;return e={},Object(u.a)(e,Symbol.iterator,(function(){return this})),Object(u.a)(e,"next",t),e}),st=function(t,e){return lt((function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:e(i)}}))},ft=o.mark(we),ht=function t(e,n){Object(v.a)(this,t),this.clock=e,this.len=n},dt=function t(){Object(v.a)(this,t),this.clients=new Map},vt=function(t,e,n){return e.clients.forEach((function(e,r){for(var i=t.doc.store.clients.get(r),c=0;c<e.length;c++){var u=e[c];he(t,i,u.clock,u.len,n)}}))},gt=function(t,e){var n=t.clients.get(e.client);return void 0!==n&&null!==function(t,e){for(var n=0,r=t.length-1;n<=r;){var i=Object(m.c)((n+r)/2),c=t[i],u=c.clock;if(u<=e){if(e<u+c.len)return i;n=i+1}else r=i-1}return null}(n,e.clock)},bt=function(t){t.clients.forEach((function(t){var e,n;for(t.sort((function(t,e){return t.clock-e.clock})),e=1,n=1;e<t.length;e++){var r=t[n-1],i=t[e];r.clock+r.len>=i.clock?r.len=Object(m.f)(r.len,i.clock+i.len-r.clock):(n<e&&(t[n]=i),n++)}t.length=n}))},yt=function(t){for(var e=new dt,n=function(n){t[n].clients.forEach((function(r,i){if(!e.clients.has(i)){for(var c=r.slice(),u=n+1;u<t.length;u++)O(c,t[u].clients.get(i)||[]);e.clients.set(i,c)}}))},r=0;r<t.length;r++)n(r);return bt(e),e},kt=function(t,e,n,r){Object(y.e)(t.clients,e,(function(){return[]})).push(new ht(n,r))},pt=function(){return new dt},Ot=function(t){var e=pt();return t.clients.forEach((function(t,n){for(var r=[],i=0;i<t.length;i++){var c=t[i];if(c.deleted){var u=c.id.clock,o=c.length;if(i+1<t.length)for(var a=t[i+1];i+1<t.length&&a.id.clock===u+o&&a.deleted;a=t[1+ ++i])o+=a.length;r.push(new ht(u,o))}}r.length>0&&e.clients.set(n,r)})),e},wt=function(t,e){Object(_.m)(t.restEncoder,e.clients.size),e.clients.forEach((function(e,n){t.resetDsCurVal(),Object(_.m)(t.restEncoder,n);var r=e.length;Object(_.m)(t.restEncoder,r);for(var i=0;i<r;i++){var c=e[i];t.writeDsClock(c.clock),t.writeDsLen(c.len)}}))},jt=function(t){for(var e=new dt,n=Object(S.k)(t.restDecoder),r=0;r<n;r++){t.resetDsCurVal();var i=Object(S.k)(t.restDecoder),c=Object(S.k)(t.restDecoder);if(c>0)for(var u=Object(y.e)(e.clients,i,(function(){return[]})),o=0;o<c;o++)u.push(new ht(t.readDsClock(),t.readDsLen()))}return e},mt=function(t,e,n){for(var r=new dt,i=Object(S.k)(t.restDecoder),c=0;c<i;c++){t.resetDsCurVal();for(var u=Object(S.k)(t.restDecoder),o=Object(S.k)(t.restDecoder),a=n.clients.get(u)||[],l=ce(n,u),s=0;s<o;s++){var f=t.readDsClock(),h=f+t.readDsLen();if(f<l){l<h&&kt(r,u,l,h-l);var d=oe(a,f),v=a[d];for(!v.deleted&&v.id.clock<f&&(a.splice(d+1,0,Wn(e,v,f-v.id.clock)),d++);d<a.length&&(v=a[d++]).id.clock<h;)v.deleted||(h<v.id.clock+v.length&&a.splice(d,0,Wn(e,v,h-v.id.clock)),v.delete(e))}else kt(r,u,f,h-f)}}if(r.clients.size>0){var g=new xt;return Object(_.m)(g.restEncoder,0),wt(g,r),g.toUint8Array()}return null},_t=C,St=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.guid,c=void 0===i?M():i,u=r.gc,o=void 0===u||u,a=r.gcFilter,l=void 0===a?function(){return!0}:a,s=r.meta,f=void 0===s?null:s,h=r.autoLoad,d=void 0!==h&&h;return Object(v.a)(this,n),(t=e.call(this)).gc=o,t.gcFilter=l,t.clientID=_t(),t.guid=c,t.share=new Map,t.store=new re,t._transaction=null,t._transactionCleanups=[],t.subdocs=new Set,t._item=null,t.shouldLoad=d,t.autoLoad=d,t.meta=f,t}return Object(f.a)(n,[{key:"load",value:function(){var t=this,e=this._item;null===e||this.shouldLoad||Oe(e.parent.doc,(function(e){e.subdocsLoaded.add(t)}),null,!0),this.shouldLoad=!0}},{key:"getSubdocs",value:function(){return this.subdocs}},{key:"getSubdocGuids",value:function(){return new Set(Array.from(this.subdocs).map((function(t){return t.guid})))}},{key:"transact",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Oe(this,t,e)}},{key:"get",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe,r=Object(y.e)(this.share,t,(function(){var t=new n;return t._integrate(e,null),t})),i=r.constructor;if(n!==Pe&&i!==n){if(i===Pe){var c=new n;c._map=r._map,r._map.forEach((function(t){for(;null!==t;t=t.left)t.parent=c})),c._start=r._start;for(var u=c._start;null!==u;u=u.right)u.parent=c;return c._length=r._length,this.share.set(t,c),c._integrate(this,null),c}throw new Error("Type with the name ".concat(t," has already been defined with a different constructor"))}return r}},{key:"getArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(t,$e)}},{key:"getText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(t,bn)}},{key:"getMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(t,en)}},{key:"getXmlFragment",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(t,kn)}},{key:"toJSON",value:function(){var t={};return this.share.forEach((function(e,n){t[n]=e.toJSON()})),t}},{key:"destroy",value:function(){var t=this;w(this.subdocs).forEach((function(t){return t.destroy()}));var e=this._item;if(null!==e){this._item=null;var r=e.content;e.deleted?r.doc=null:(r.doc=new n(Object(s.a)({guid:this.guid},r.opts)),r.doc._item=e),Oe(e.parent.doc,(function(n){e.deleted||n.subdocsAdded.add(r.doc),n.subdocsRemoved.add(t)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),Object(h.a)(Object(d.a)(n.prototype),"destroy",this).call(this)}},{key:"on",value:function(t,e){Object(h.a)(Object(d.a)(n.prototype),"on",this).call(this,t,e)}},{key:"off",value:function(t,e){Object(h.a)(Object(d.a)(n.prototype),"off",this).call(this,t,e)}}]),n}(j),Et=function(){function t(e){Object(v.a)(this,t),this.restDecoder=e}return Object(f.a)(t,[{key:"resetDsCurVal",value:function(){}},{key:"readDsClock",value:function(){return Object(S.k)(this.restDecoder)}},{key:"readDsLen",value:function(){return Object(S.k)(this.restDecoder)}}]),t}(),Dt=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"readLeftID",value:function(){return Zt(Object(S.k)(this.restDecoder),Object(S.k)(this.restDecoder))}},{key:"readRightID",value:function(){return Zt(Object(S.k)(this.restDecoder),Object(S.k)(this.restDecoder))}},{key:"readClient",value:function(){return Object(S.k)(this.restDecoder)}},{key:"readInfo",value:function(){return Object(S.h)(this.restDecoder)}},{key:"readString",value:function(){return Object(S.j)(this.restDecoder)}},{key:"readParentInfo",value:function(){return 1===Object(S.k)(this.restDecoder)}},{key:"readTypeRef",value:function(){return Object(S.k)(this.restDecoder)}},{key:"readLen",value:function(){return Object(S.k)(this.restDecoder)}},{key:"readAny",value:function(){return Object(S.g)(this.restDecoder)}},{key:"readBuf",value:function(){return Object(I.a)(Object(S.l)(this.restDecoder))}},{key:"readJSON",value:function(){return JSON.parse(Object(S.j)(this.restDecoder))}},{key:"readKey",value:function(){return Object(S.j)(this.restDecoder)}}]),n}(Et),Ct=function(){function t(e){Object(v.a)(this,t),this.dsCurrVal=0,this.restDecoder=e}return Object(f.a)(t,[{key:"resetDsCurVal",value:function(){this.dsCurrVal=0}},{key:"readDsClock",value:function(){return this.dsCurrVal+=Object(S.k)(this.restDecoder),this.dsCurrVal}},{key:"readDsLen",value:function(){var t=Object(S.k)(this.restDecoder)+1;return this.dsCurrVal+=t,t}}]),t}(),At=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this,t)).keys=[],Object(S.k)(t),r.keyClockDecoder=new S.a(Object(S.l)(t)),r.clientDecoder=new S.d(Object(S.l)(t)),r.leftClockDecoder=new S.a(Object(S.l)(t)),r.rightClockDecoder=new S.a(Object(S.l)(t)),r.infoDecoder=new S.b(Object(S.l)(t),S.h),r.stringDecoder=new S.c(Object(S.l)(t)),r.parentInfoDecoder=new S.b(Object(S.l)(t),S.h),r.typeRefDecoder=new S.d(Object(S.l)(t)),r.lenDecoder=new S.d(Object(S.l)(t)),r}return Object(f.a)(n,[{key:"readLeftID",value:function(){return new Xt(this.clientDecoder.read(),this.leftClockDecoder.read())}},{key:"readRightID",value:function(){return new Xt(this.clientDecoder.read(),this.rightClockDecoder.read())}},{key:"readClient",value:function(){return this.clientDecoder.read()}},{key:"readInfo",value:function(){return this.infoDecoder.read()}},{key:"readString",value:function(){return this.stringDecoder.read()}},{key:"readParentInfo",value:function(){return 1===this.parentInfoDecoder.read()}},{key:"readTypeRef",value:function(){return this.typeRefDecoder.read()}},{key:"readLen",value:function(){return this.lenDecoder.read()}},{key:"readAny",value:function(){return Object(S.g)(this.restDecoder)}},{key:"readBuf",value:function(){return Object(S.l)(this.restDecoder)}},{key:"readJSON",value:function(){return Object(S.g)(this.restDecoder)}},{key:"readKey",value:function(){var t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];var e=this.stringDecoder.read();return this.keys.push(e),e}}]),n}(Ct),Mt=function(){function t(){Object(v.a)(this,t),this.restEncoder=Object(_.e)()}return Object(f.a)(t,[{key:"toUint8Array",value:function(){return Object(_.f)(this.restEncoder)}},{key:"resetDsCurVal",value:function(){}},{key:"writeDsClock",value:function(t){Object(_.m)(this.restEncoder,t)}},{key:"writeDsLen",value:function(t){Object(_.m)(this.restEncoder,t)}}]),t}(),It=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"writeLeftID",value:function(t){Object(_.m)(this.restEncoder,t.client),Object(_.m)(this.restEncoder,t.clock)}},{key:"writeRightID",value:function(t){Object(_.m)(this.restEncoder,t.client),Object(_.m)(this.restEncoder,t.clock)}},{key:"writeClient",value:function(t){Object(_.m)(this.restEncoder,t)}},{key:"writeInfo",value:function(t){Object(_.i)(this.restEncoder,t)}},{key:"writeString",value:function(t){Object(_.l)(this.restEncoder,t)}},{key:"writeParentInfo",value:function(t){Object(_.m)(this.restEncoder,t?1:0)}},{key:"writeTypeRef",value:function(t){Object(_.m)(this.restEncoder,t)}},{key:"writeLen",value:function(t){Object(_.m)(this.restEncoder,t)}},{key:"writeAny",value:function(t){Object(_.g)(this.restEncoder,t)}},{key:"writeBuf",value:function(t){Object(_.n)(this.restEncoder,t)}},{key:"writeJSON",value:function(t){Object(_.l)(this.restEncoder,JSON.stringify(t))}},{key:"writeKey",value:function(t){Object(_.l)(this.restEncoder,t)}}]),n}(Mt),Nt=function(){function t(){Object(v.a)(this,t),this.restEncoder=Object(_.e)(),this.dsCurrVal=0}return Object(f.a)(t,[{key:"toUint8Array",value:function(){return Object(_.f)(this.restEncoder)}},{key:"resetDsCurVal",value:function(){this.dsCurrVal=0}},{key:"writeDsClock",value:function(t){var e=t-this.dsCurrVal;this.dsCurrVal=t,Object(_.m)(this.restEncoder,e)}},{key:"writeDsLen",value:function(t){0===t&&L(),Object(_.m)(this.restEncoder,t-1),this.dsCurrVal+=t}}]),t}(),xt=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(){var t;return Object(v.a)(this,n),(t=e.call(this)).keyMap=new Map,t.keyClock=0,t.keyClockEncoder=new _.a,t.clientEncoder=new _.d,t.leftClockEncoder=new _.a,t.rightClockEncoder=new _.a,t.infoEncoder=new _.b(_.i),t.stringEncoder=new _.c,t.parentInfoEncoder=new _.b(_.i),t.typeRefEncoder=new _.d,t.lenEncoder=new _.d,t}return Object(f.a)(n,[{key:"toUint8Array",value:function(){var t=Object(_.e)();return Object(_.m)(t,0),Object(_.n)(t,this.keyClockEncoder.toUint8Array()),Object(_.n)(t,this.clientEncoder.toUint8Array()),Object(_.n)(t,this.leftClockEncoder.toUint8Array()),Object(_.n)(t,this.rightClockEncoder.toUint8Array()),Object(_.n)(t,Object(_.f)(this.infoEncoder)),Object(_.n)(t,this.stringEncoder.toUint8Array()),Object(_.n)(t,Object(_.f)(this.parentInfoEncoder)),Object(_.n)(t,this.typeRefEncoder.toUint8Array()),Object(_.n)(t,this.lenEncoder.toUint8Array()),Object(_.j)(t,Object(_.f)(this.restEncoder)),Object(_.f)(t)}},{key:"writeLeftID",value:function(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}},{key:"writeRightID",value:function(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}},{key:"writeClient",value:function(t){this.clientEncoder.write(t)}},{key:"writeInfo",value:function(t){this.infoEncoder.write(t)}},{key:"writeString",value:function(t){this.stringEncoder.write(t)}},{key:"writeParentInfo",value:function(t){this.parentInfoEncoder.write(t?1:0)}},{key:"writeTypeRef",value:function(t){this.typeRefEncoder.write(t)}},{key:"writeLen",value:function(t){this.lenEncoder.write(t)}},{key:"writeAny",value:function(t){Object(_.g)(this.restEncoder,t)}},{key:"writeBuf",value:function(t){Object(_.n)(this.restEncoder,t)}},{key:"writeJSON",value:function(t){Object(_.g)(this.restEncoder,t)}},{key:"writeKey",value:function(t){void 0===this.keyMap.get(t)?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(this.keyClock++)}}]),n}(Nt),Lt=function(t,e,n){var r=new Map;n.forEach((function(t,n){ce(e,n)>t&&r.set(n,t)})),ie(e).forEach((function(t,e){n.has(e)||r.set(e,0)})),Object(_.m)(t.restEncoder,r.size),Array.from(r.entries()).sort((function(t,e){return e[0]-t[0]})).forEach((function(n){var r=Object(l.a)(n,2),i=r[0],c=r[1];!function(t,e,n,r){r=Object(m.f)(r,e[0].id.clock);var i=oe(e,r);Object(_.m)(t.restEncoder,e.length-i),t.writeClient(n),Object(_.m)(t.restEncoder,r);var c=e[i];c.write(t,r-c.id.clock);for(var u=i+1;u<e.length;u++)e[u].write(t,0)}(t,e.clients.get(i),i,c)}))},Tt=function(t,e){for(var n=Object(y.c)(),r=Object(S.k)(t.restDecoder),i=0;i<r;i++){var c=Object(S.k)(t.restDecoder),u=new Array(c),o=t.readClient(),a=Object(S.k)(t.restDecoder);n.set(o,{i:0,refs:u});for(var l=0;l<c;l++){var s=t.readInfo();switch(T.i&s){case 0:var f=t.readLen();u[l]=new _n(Zt(o,a),f),a+=f;break;case 10:var h=Object(S.k)(t.restDecoder);u[l]=new zn(Zt(o,a),h),a+=h;break;default:var d=0===(s&(T.f|T.g)),v=new Bn(Zt(o,a),null,(s&T.g)===T.g?t.readLeftID():null,null,(s&T.f)===T.f?t.readRightID():null,d?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,d&&(s&T.e)===T.e?t.readString():null,Kn(t,s));u[l]=v,a+=v.length}}}return n},Rt=function(t,e,n){var r=[],i=Array.from(n.keys()).sort((function(t,e){return t-e}));if(0===i.length)return null;var c=function(){if(0===i.length)return null;for(var t=n.get(i[i.length-1]);t.refs.length===t.i;){if(i.pop(),!(i.length>0))return null;t=n.get(i[i.length-1])}return t},u=c();if(null===u&&0===r.length)return null;for(var o=new re,l=new Map,s=function(t,e){var n=l.get(t);(null==n||n>e)&&l.set(t,e)},f=u.refs[u.i++],h=new Map,d=function(){var t,e=Object(a.a)(r);try{var c=function(){var e=t.value,r=e.id.client,c=n.get(r);c?(c.i--,o.clients.set(r,c.refs.slice(c.i)),n.delete(r),c.i=0,c.refs=[]):o.clients.set(r,[e]),i=i.filter((function(t){return t!==r}))};for(e.s();!(t=e.n()).done;)c()}catch(u){e.e(u)}finally{e.f()}r.length=0};;){if(f.constructor!==zn){var v=Object(y.e)(h,f.id.client,(function(){return ce(e,f.id.client)}))-f.id.clock;if(v<0)r.push(f),s(f.id.client,f.id.clock-1),d();else{var g=f.getMissing(t,e);if(null!==g){r.push(f);var b=n.get(g)||{refs:[],i:0};if(b.refs.length!==b.i){f=b.refs[b.i++];continue}s(g,ce(e,g)),d()}else(0===v||v<f.length)&&(f.integrate(t,v),h.set(f.id.client,f.id.clock+f.length))}}if(r.length>0)f=r.pop();else if(null!==u&&u.i<u.refs.length)f=u.refs[u.i++];else{if(null===(u=c()))break;f=u.refs[u.i++]}}if(o.clients.size>0){var k=new xt;return Lt(k,o,new Map),Object(_.m)(k.restEncoder,0),{missing:l,update:k.toUint8Array()}}return null},Ut=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new At(t);return Oe(e,(function(t){var e=!1,n=t.doc,i=n.store,c=Tt(r,n),u=Rt(t,i,c),o=i.pendingStructs;if(o){var s,f=Object(a.a)(o.missing);try{for(f.s();!(s=f.n()).done;){var h=Object(l.a)(s.value,2),d=h[0];if(h[1]<ce(i,d)){e=!0;break}}}catch(_){f.e(_)}finally{f.f()}if(u){var v,g=Object(a.a)(u.missing);try{for(g.s();!(v=g.n()).done;){var b=Object(l.a)(v.value,2),y=b[0],k=b[1],p=o.missing.get(y);(null==p||p>k)&&o.missing.set(y,k)}}catch(_){g.e(_)}finally{g.f()}o.update=Se([o.update,u.update])}}else i.pendingStructs=u;var O=mt(r,t,i);if(i.pendingDs){var w=new At(Object(S.e)(i.pendingDs));Object(S.k)(w.restDecoder);var j=mt(w,t,i);i.pendingDs=O&&j?Se([O,j]):O||j}else i.pendingDs=O;if(e){var m=i.pendingStructs.update;i.pendingStructs=null,Pt(t.doc,m)}}),n,!1)},Pt=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:At,i=Object(S.e)(e);Ut(i,t,n,new r(i))},Jt=function(t,e,n){return Pt(t,e,n,Dt)},Vt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;Lt(t,e.store,n),wt(t,Ot(e.store))},Ft=function(t,e){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint8Array([0]),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new xt,r=Bt(e);Vt(n,t,r);var i=[n.toUint8Array()];return n.constructor===xt&&(t.store.pendingDs&&i.push(t.store.pendingDs),t.store.pendingStructs&&i.push(Ee(t.store.pendingStructs.update,e)),i.length>1)?Se(i):i[0]}(t,e,new It)},Wt=function(t){for(var e=new Map,n=Object(S.k)(t.restDecoder),r=0;r<n;r++){var i=Object(S.k)(t.restDecoder),c=Object(S.k)(t.restDecoder);e.set(i,c)}return e},Bt=function(t){return Wt(new Et(Object(S.e)(t)))},Kt=function t(){Object(v.a)(this,t),this.l=[]},Ht=function(){return new Kt},zt=function(t,e){return t.l.push(e)},qt=function(t,e){var n=t.l,r=n.length;t.l=n.filter((function(t){return e!==t})),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Gt=function(t,e,n){return V(t.l,[e,n])},Xt=function t(e,n){Object(v.a)(this,t),this.client=e,this.clock=n},Yt=function(t,e){return t===e||null!==t&&null!==e&&t.client===e.client&&t.clock===e.clock},Zt=function(t,e){return new Xt(t,e)},Qt=function(t){var e,n=Object(a.a)(t.doc.share.entries());try{for(n.s();!(e=n.n()).done;){var r=Object(l.a)(e.value,2),i=r[0];if(r[1]===t)return i}}catch(c){n.e(c)}finally{n.f()}throw L()},$t=function t(e,n){Object(v.a)(this,t),this.ds=e,this.sv=n},te=function(t,e){return new $t(t,e)},ee=(te(pt(),new Map),function(t,e){return void 0===e?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!gt(e.ds,t.id)}),ne=function t(e,n){var r=Object(y.e)(e.meta,t,k),i=e.doc.store;r.has(n)||(n.sv.forEach((function(t,n){t<ce(i,n)&&se(e,Zt(n,t))})),vt(e,n.ds,(function(t){})),r.add(n))},re=function t(){Object(v.a)(this,t),this.clients=new Map,this.pendingStructs=null,this.pendingDs=null},ie=function(t){var e=new Map;return t.clients.forEach((function(t,n){var r=t[t.length-1];e.set(n,r.id.clock+r.length)})),e},ce=function(t,e){var n=t.clients.get(e);if(void 0===n)return 0;var r=n[n.length-1];return r.id.clock+r.length},ue=function(t,e){var n=t.clients.get(e.id.client);if(void 0===n)n=[],t.clients.set(e.id.client,n);else{var r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw L()}n.push(e)},oe=function(t,e){var n=0,r=t.length-1,i=t[r],c=i.id.clock;if(c===e)return r;for(var u=Object(m.c)(e/(c+i.length-1)*r);n<=r;){if((c=(i=t[u]).id.clock)<=e){if(e<c+i.length)return u;n=u+1}else r=u-1;u=Object(m.c)((n+r)/2)}throw L()},ae=function(t,e){var n=t.clients.get(e.client);return n[oe(n,e.clock)]},le=function(t,e,n){var r=oe(e,n),i=e[r];return i.id.clock<n&&i instanceof Bn?(e.splice(r+1,0,Wn(t,i,n-i.id.clock)),r+1):r},se=function(t,e){var n=t.doc.store.clients.get(e.client);return n[le(t,n,e.clock)]},fe=function(t,e,n){var r=e.clients.get(n.client),i=oe(r,n.clock),c=r[i];return n.clock!==c.id.clock+c.length-1&&c.constructor!==_n&&r.splice(i+1,0,Wn(t,c,n.clock-c.id.clock+1)),c},he=function(t,e,n,r,i){if(0!==r){var c,u=n+r,o=le(t,e,n);do{u<(c=e[o++]).id.clock+c.length&&le(t,e,u),i(c)}while(o<e.length&&e[o].id.clock<u)}},de=function t(e,n,r){Object(v.a)(this,t),this.doc=e,this.deleteSet=new dt,this.beforeState=ie(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set},ve=function(t,e){return!(0===e.deleteSet.clients.size&&!Object(y.a)(e.afterState,(function(t,n){return e.beforeState.get(n)!==t})))&&(bt(e.deleteSet),function(t,e){Lt(t,e.doc.store,e.beforeState)}(t,e),wt(t,e.deleteSet),!0)},ge=function(t,e,n){var r=e._item;(null===r||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&Object(y.e)(t.changed,e,k).add(n)},be=function(t,e){var n=t[e-1],r=t[e];n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)&&(t.splice(e,1),r instanceof Bn&&null!==r.parentSub&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n))},ye=function(t,e,n){var r,i=Object(a.a)(t.clients.entries());try{for(i.s();!(r=i.n()).done;)for(var c=Object(l.a)(r.value,2),u=c[0],o=c[1],s=e.clients.get(u),f=o.length-1;f>=0;f--)for(var h=o[f],d=h.clock+h.len,v=oe(s,h.clock),g=s[v];v<s.length&&g.id.clock<d;g=s[++v]){var b=s[v];if(h.clock+h.len<=b.id.clock)break;b instanceof Bn&&b.deleted&&!b.keep&&n(b)&&b.gc(e,!1)}}catch(y){i.e(y)}finally{i.f()}},ke=function(t,e){t.clients.forEach((function(t,n){for(var r=e.clients.get(n),i=t.length-1;i>=0;i--)for(var c=t[i],u=Object(m.g)(r.length-1,1+oe(r,c.clock+c.len-1)),o=r[u];u>0&&o.id.clock>=c.clock;o=r[--u])be(r,u)}))},pe=function t(e,n){if(n<e.length){var r=e[n],i=r.doc,c=i.store,u=r.deleteSet,o=r._mergeStructs;try{bt(u),r.afterState=ie(r.doc.store),i._transaction=null,i.emit("beforeObserverCalls",[r,i]);var a=[];r.changed.forEach((function(t,e){return a.push((function(){null!==e._item&&e._item.deleted||e._callObserver(r,t)}))})),a.push((function(){r.changedParentTypes.forEach((function(t,e){return a.push((function(){null!==e._item&&e._item.deleted||((t=t.filter((function(t){return null===t.target._item||!t.target._item.deleted}))).forEach((function(t){t.currentTarget=e})),t.sort((function(t,e){return t.path.length-e.path.length})),Gt(e._dEH,t,r))}))})),a.push((function(){return i.emit("afterTransaction",[r,i])}))})),V(a,[])}finally{i.gc&&ye(u,c,i.gcFilter),ke(u,c),r.afterState.forEach((function(t,e){var n=r.beforeState.get(e)||0;if(n!==t)for(var i=c.clients.get(e),u=Object(m.f)(oe(i,n),1),o=i.length-1;o>=u;o--)be(i,o)}));for(var l=0;l<o.length;l++){var s=o[l].id,f=s.client,h=s.clock,d=c.clients.get(f),v=oe(d,h);v+1<d.length&&be(d,v+1),v>0&&be(d,v)}if(r.local||r.afterState.get(i.clientID)===r.beforeState.get(i.clientID)||(i.clientID=_t(),ot(nt,X,"[yjs] ",Y,tt,"Changed the client-id because another client seems to be using it.")),i.emit("afterTransactionCleanup",[r,i]),i._observers.has("update")){var g=new It;ve(g,r)&&i.emit("update",[g.toUint8Array(),r.origin,i,r])}if(i._observers.has("updateV2")){var b=new xt;ve(b,r)&&i.emit("updateV2",[b.toUint8Array(),r.origin,i,r])}r.subdocsAdded.forEach((function(t){return i.subdocs.add(t)})),r.subdocsRemoved.forEach((function(t){return i.subdocs.delete(t)})),i.emit("subdocs",[{loaded:r.subdocsLoaded,added:r.subdocsAdded,removed:r.subdocsRemoved}]),r.subdocsRemoved.forEach((function(t){return t.destroy()})),e.length<=n+1?(i._transactionCleanups=[],i.emit("afterAllTransactions",[i,e])):t(e,n+1)}}},Oe=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=t._transactionCleanups,c=!1;null===t._transaction&&(c=!0,t._transaction=new de(t,n,r),i.push(t._transaction),1===i.length&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{e(t._transaction)}finally{c&&i[0]===t._transaction&&pe(i,0)}};function we(t){var e,n,r,i,c,u,a,l,s,f,h;return o.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e=Object(S.k)(t.restDecoder),n=0;case 2:if(!(n<e)){o.next=34;break}r=Object(S.k)(t.restDecoder),i=t.readClient(),c=Object(S.k)(t.restDecoder),u=0;case 7:if(!(u<r)){o.next=31;break}if(10!==(a=t.readInfo())){o.next=16;break}return l=Object(S.k)(t.restDecoder),o.next=13,new zn(Zt(i,c),l);case 13:c+=l,o.next=28;break;case 16:if(0===(T.i&a)){o.next=24;break}return s=0===(a&(T.f|T.g)),f=new Bn(Zt(i,c),null,(a&T.g)===T.g?t.readLeftID():null,null,(a&T.f)===T.f?t.readRightID():null,s?t.readParentInfo()?t.readString():t.readLeftID():null,s&&(a&T.e)===T.e?t.readString():null,Kn(t,a)),o.next=21,f;case 21:c+=f.length,o.next=28;break;case 24:return h=t.readLen(),o.next=27,new _n(Zt(i,c),h);case 27:c+=h;case 28:u++,o.next=7;break;case 31:n++,o.next=2;break;case 34:case"end":return o.stop()}}),ft)}var je=function(){function t(e,n){Object(v.a)(this,t),this.gen=we(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}return Object(f.a)(t,[{key:"next",value:function(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===zn);return this.curr}}]),t}(),me=function t(e){Object(v.a)(this,t),this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]},_e=function(t,e){if(t.constructor===_n){var n=t.id,r=n.client,i=n.clock;return new _n(Zt(r,i+e),t.length-e)}if(t.constructor===zn){var c=t.id,u=c.client,o=c.clock;return new zn(Zt(u,o+e),t.length-e)}var a=t,l=a.id,s=l.client,f=l.clock;return new Bn(Zt(s,f+e),null,Zt(s,f+e-1),null,a.rightOrigin,a.parent,a.parentSub,a.content.splice(e))},Se=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:At,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xt,r=t.map((function(t){return new e(Object(S.e)(t))})),i=r.map((function(t){return new je(t,!0)})),c=null,u=new n,o=new me(u);(i=i.filter((function(t){return null!==t.curr}))).sort((function(t,e){if(t.curr.id.client===e.curr.id.client){var n=t.curr.id.clock-e.curr.id.clock;return 0===n?t.curr.constructor===e.curr.constructor?0:t.curr.constructor===zn?1:-1:n}return e.curr.id.client-t.curr.id.client})),0!==i.length;){var a=i[0],l=a.curr.id.client;if(null!==c){for(var s=a.curr;null!==s&&s.id.clock+s.length<=c.struct.id.clock+c.struct.length&&s.id.client>=c.struct.id.client;)s=a.next();if(null===s||s.id.client!==l)continue;if(l!==c.struct.id.client)Ce(o,c.struct,c.offset),c={struct:s,offset:0},a.next();else if(c.struct.id.clock+c.struct.length<s.id.clock)if(c.struct.constructor===zn)c.struct.length=s.id.clock+s.length-c.struct.id.clock;else{Ce(o,c.struct,c.offset);var f=s.id.clock-c.struct.id.clock-c.struct.length,h=new zn(Zt(l,c.struct.id.clock+c.struct.length),f);c={struct:h,offset:0}}else{var d=c.struct.id.clock+c.struct.length-s.id.clock;d>0&&(c.struct.constructor===zn?c.struct.length-=d:s=_e(s,d)),c.struct.mergeWith(s)||(Ce(o,c.struct,c.offset),c={struct:s,offset:0},a.next())}}else c={struct:a.curr,offset:0},a.next();for(var v=a.curr;null!==v&&v.id.client===l&&v.id.clock===c.struct.id.clock+c.struct.length&&v.constructor!==zn;v=a.next())Ce(o,c.struct,c.offset),c={struct:v,offset:0}}null!==c&&(Ce(o,c.struct,c.offset),c=null),Ae(o);var g=r.map((function(t){return jt(t)})),b=yt(g);return wt(u,b),u.toUint8Array()},Ee=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:At,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xt,i=Bt(e),c=new r,u=new me(c),o=new n(Object(S.e)(t)),a=new je(o,!1);a.curr;){var l=a.curr,s=l.id.client,f=i.get(s)||0;if(a.curr.constructor!==zn)if(l.id.clock+l.length>f)for(Ce(u,l,Object(m.f)(f-l.id.clock,0)),a.next();a.curr&&a.curr.id.client===s;)Ce(u,a.curr,0),a.next();else for(;a.curr&&a.curr.id.client===s&&a.curr.id.clock+a.curr.length<=f;)a.next();else a.next()}Ae(u);var h=jt(o);return wt(c,h),c.toUint8Array()},De=function(t){t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:Object(_.f)(t.encoder.restEncoder)}),t.encoder.restEncoder=Object(_.e)(),t.written=0)},Ce=function(t,e,n){t.written>0&&t.currClient!==e.id.client&&De(t),0===t.written&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),Object(_.m)(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},Ae=function(t){De(t);var e=t.encoder.restEncoder;Object(_.m)(e,t.clientStructs.length);for(var n=0;n<t.clientStructs.length;n++){var r=t.clientStructs[n];Object(_.m)(e,r.written),Object(_.j)(e,r.restEncoder)}},Me=function(){function t(e,n){Object(v.a)(this,t),this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null}return Object(f.a)(t,[{key:"deletes",value:function(t){return gt(this.transaction.deleteSet,t.id)}},{key:"adds",value:function(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}},{key:"path",get:function(){return Ie(this.currentTarget,this.target)}},{key:"changes",get:function(){var t=this,e=this._changes;if(null===e){var n=this.target,r=k(),i=k(),c=[],u=new Map;e={added:r,deleted:i,delta:c,keys:u};var o=this.transaction.changed.get(n);if(o.has(null)){for(var a=null,l=function(){a&&c.push(a)},s=n._start;null!==s;s=s.right)s.deleted?this.deletes(s)&&!this.adds(s)&&(null!==a&&void 0!==a.delete||(l(),a={delete:0}),a.delete+=s.length,i.add(s)):this.adds(s)?(null!==a&&void 0!==a.insert||(l(),a={insert:[]}),a.insert=a.insert.concat(s.content.getContent()),r.add(s)):(null!==a&&void 0!==a.retain||(l(),a={retain:0}),a.retain+=s.length);null!==a&&void 0===a.retain&&l()}o.forEach((function(e){if(null!==e){var r,i,c=n._map.get(e);if(t.adds(c)){for(var o=c.left;null!==o&&t.adds(o);)o=o.left;if(t.deletes(c)){if(null===o||!t.deletes(o))return;r="delete",i=p(o.content.getContent())}else null!==o&&t.deletes(o)?(r="update",i=p(o.content.getContent())):(r="add",i=void 0)}else{if(!t.deletes(c))return;r="delete",i=p(c.content.getContent())}u.set(e,{action:r,oldValue:i})}})),this._changes=e}return e}}]),t}(),Ie=function(t,e){for(var n=[];null!==e._item&&e!==t;){if(null!==e._item.parentSub)n.unshift(e._item.parentSub);else{for(var r=0,i=e._item.parent._start;i!==e._item&&null!==i;)i.deleted||r++,i=i.right;n.unshift(r)}e=e._item.parent}return n},Ne=0,xe=function t(e,n){Object(v.a)(this,t),e.marker=!0,this.p=e,this.index=n,this.timestamp=Ne++},Le=function(t,e,n){t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=Ne++},Te=function(t,e){if(null===t._start||0===e||null===t._searchMarker)return null;var n=0===t._searchMarker.length?null:t._searchMarker.reduce((function(t,n){return Object(m.a)(e-t.index)<Object(m.a)(e-n.index)?t:n})),r=t._start,i=0;for(null!==n&&(r=n.p,i=n.index,function(t){t.timestamp=Ne++}(n));null!==r.right&&i<e;){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}for(;null!==r.left&&i>e;)!(r=r.left).deleted&&r.countable&&(i-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)!(r=r.left).deleted&&r.countable&&(i-=r.length);return null!==n&&Object(m.a)(n.index-i)<r.parent.length/80?(Le(n,r,i),n):function(t,e,n){if(t.length>=80){var r=t.reduce((function(t,e){return t.timestamp<e.timestamp?t:e}));return Le(r,e,n),r}var i=new xe(e,n);return t.push(i),i}(t._searchMarker,r,i)},Re=function(t,e,n){for(var r=t.length-1;r>=0;r--){var i=t[r];if(n>0){var c=i.p;for(c.marker=!1;c&&(c.deleted||!c.countable);)(c=c.left)&&!c.deleted&&c.countable&&(i.index-=c.length);if(null===c||!0===c.marker){t.splice(r,1);continue}i.p=c,c.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=Object(m.f)(e,i.index+n))}},Ue=function(t,e,n){for(var r=t,i=e.changedParentTypes;Object(y.e)(i,t,(function(){return[]})).push(n),null!==t._item;)t=t._item.parent;Gt(r._eH,n,e)},Pe=function(){function t(){Object(v.a)(this,t),this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Ht(),this._dEH=Ht(),this._searchMarker=null}return Object(f.a)(t,[{key:"_integrate",value:function(t,e){this.doc=t,this._item=e}},{key:"_copy",value:function(){throw x()}},{key:"clone",value:function(){throw x()}},{key:"_write",value:function(t){}},{key:"_callObserver",value:function(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}},{key:"observe",value:function(t){zt(this._eH,t)}},{key:"observeDeep",value:function(t){zt(this._dEH,t)}},{key:"unobserve",value:function(t){qt(this._eH,t)}},{key:"unobserveDeep",value:function(t){qt(this._dEH,t)}},{key:"toJSON",value:function(){}},{key:"parent",get:function(){return this._item?this._item.parent:null}},{key:"_first",get:function(){for(var t=this._start;null!==t&&t.deleted;)t=t.right;return t}}]),t}(),Je=function(t,e,n){e<0&&(e=t._length+e),n<0&&(n=t._length+n);for(var r=n-e,i=[],c=t._start;null!==c&&r>0;){if(c.countable&&!c.deleted){var u=c.content.getContent();if(u.length<=e)e-=u.length;else{for(var o=e;o<u.length&&r>0;o++)i.push(u[o]),r--;e=0}}c=c.right}return i},Ve=function(t){for(var e=[],n=t._start;null!==n;){if(n.countable&&!n.deleted)for(var r=n.content.getContent(),i=0;i<r.length;i++)e.push(r[i]);n=n.right}return e},Fe=function(t,e){for(var n=0,r=t._start;null!==r;){if(r.countable&&!r.deleted)for(var i=r.content.getContent(),c=0;c<i.length;c++)e(i[c],n++,t);r=r.right}},We=function(t,e){var n=[];return Fe(t,(function(r,i){n.push(e(r,i,t))})),n},Be=function(t,e){var n=Te(t,e),r=t._start;for(null!==n&&(r=n.p,e-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},Ke=function(t,e,n,r){var i=n,c=t.doc,u=c.clientID,o=c.store,a=null===n?e._start:n.right,l=[],s=function(){l.length>0&&((i=new Bn(Zt(u,ce(o,u)),i,i&&i.lastId,a,a&&a.id,e,null,new In(l))).integrate(t,0),l=[])};r.forEach((function(n){switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:l.push(n);break;default:switch(s(),n.constructor){case Uint8Array:case ArrayBuffer:(i=new Bn(Zt(u,ce(o,u)),i,i&&i.lastId,a,a&&a.id,e,null,new Sn(new Uint8Array(n)))).integrate(t,0);break;case St:(i=new Bn(Zt(u,ce(o,u)),i,i&&i.lastId,a,a&&a.id,e,null,new Dn(n))).integrate(t,0);break;default:if(!(n instanceof Pe))throw new Error("Unexpected content type in insert operation");(i=new Bn(Zt(u,ce(o,u)),i,i&&i.lastId,a,a&&a.id,e,null,new Fn(n))).integrate(t,0)}}})),s()},He=function(t,e,n,r){if(0===n)return e._searchMarker&&Re(e._searchMarker,n,r.length),Ke(t,e,null,r);var i=n,c=Te(e,n),u=e._start;for(null!==c&&(u=c.p,0===(n-=c.index)&&(n+=(u=u.prev)&&u.countable&&!u.deleted?u.length:0));null!==u;u=u.right)if(!u.deleted&&u.countable){if(n<=u.length){n<u.length&&se(t,Zt(u.id.client,u.id.clock+n));break}n-=u.length}return e._searchMarker&&Re(e._searchMarker,i,r.length),Ke(t,e,u,r)},ze=function(t,e,n,r){if(0!==r){var i=n,c=r,u=Te(e,n),o=e._start;for(null!==u&&(o=u.p,n-=u.index);null!==o&&n>0;o=o.right)!o.deleted&&o.countable&&(n<o.length&&se(t,Zt(o.id.client,o.id.clock+n)),n-=o.length);for(;r>0&&null!==o;)o.deleted||(r<o.length&&se(t,Zt(o.id.client,o.id.clock+r)),o.delete(t),r-=o.length),o=o.right;if(r>0)throw N("array length exceeded");e._searchMarker&&Re(e._searchMarker,i,-c+r)}},qe=function(t,e,n){var r=e._map.get(n);void 0!==r&&r.delete(t)},Ge=function(t,e,n,r){var i,c=e._map.get(n)||null,u=t.doc,o=u.clientID;if(null==r)i=new In([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:i=new In([r]);break;case Uint8Array:i=new Sn(r);break;case St:i=new Dn(r);break;default:if(!(r instanceof Pe))throw new Error("Unexpected content type");i=new Fn(r)}new Bn(Zt(o,ce(u.store,o)),c,c&&c.lastId,null,null,e,n,i).integrate(t,0)},Xe=function(t,e){var n=t._map.get(e);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},Ye=function(t){var e={};return t._map.forEach((function(t,n){t.deleted||(e[n]=t.content.getContent()[t.length-1])})),e},Ze=function(t){return e=t.entries(),n=function(t){return!t[1].deleted},lt((function(){var t;do{t=e.next()}while(!t.done&&!n(t.value));return t}));var e,n},Qe=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(t,r){var i;return Object(v.a)(this,n),(i=e.call(this,t,r))._transaction=r,i}return n}(Me),$e=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(){var t;return Object(v.a)(this,n),(t=e.call(this))._prelimContent=[],t._searchMarker=[],t}return Object(f.a)(n,[{key:"_integrate",value:function(t,e){Object(h.a)(Object(d.a)(n.prototype),"_integrate",this).call(this,t,e),this.insert(0,this._prelimContent),this._prelimContent=null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var t=new n;return t.insert(0,this.toArray().map((function(t){return t instanceof Pe?t.clone():t}))),t}},{key:"_callObserver",value:function(t,e){Object(h.a)(Object(d.a)(n.prototype),"_callObserver",this).call(this,t,e),Ue(this,t,new Qe(this,t))}},{key:"insert",value:function(t,e){var n,r=this;null!==this.doc?Oe(this.doc,(function(n){He(n,r,t,e)})):(n=this._prelimContent).splice.apply(n,[t,0].concat(Object(c.a)(e)))}},{key:"push",value:function(t){this.insert(this.length,t)}},{key:"unshift",value:function(t){this.insert(0,t)}},{key:"delete",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null!==this.doc?Oe(this.doc,(function(r){ze(r,e,t,n)})):this._prelimContent.splice(t,n)}},{key:"get",value:function(t){return Be(this,t)}},{key:"toArray",value:function(){return Ve(this)}},{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return Je(this,t,e)}},{key:"toJSON",value:function(){return this.map((function(t){return t instanceof Pe?t.toJSON():t}))}},{key:"map",value:function(t){return We(this,t)}},{key:"forEach",value:function(t){Fe(this,t)}},{key:Symbol.iterator,value:function(){return function(t){var e,n=t._start,r=null,i=0;return e={},Object(u.a)(e,Symbol.iterator,(function(){return this})),Object(u.a)(e,"next",(function(){if(null===r){for(;null!==n&&n.deleted;)n=n.right;if(null===n)return{done:!0,value:void 0};r=n.content.getContent(),i=0,n=n.right}var t=r[i++];return r.length<=i&&(r=null),{done:!1,value:t}})),e}(this)}},{key:"_write",value:function(t){t.writeTypeRef(Ln)}},{key:"length",get:function(){return null===this._prelimContent?this._length:this._prelimContent.length}}],[{key:"from",value:function(t){var e=new n;return e.push(t),e}}]),n}(Pe),tn=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(t,r,i){var c;return Object(v.a)(this,n),(c=e.call(this,t,r)).keysChanged=i,c}return n}(Me),en=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this))._prelimContent=null,r._prelimContent=void 0===t?new Map:new Map(t),r}return Object(f.a)(n,[{key:"_integrate",value:function(t,e){var r=this;Object(h.a)(Object(d.a)(n.prototype),"_integrate",this).call(this,t,e),this._prelimContent.forEach((function(t,e){r.set(e,t)})),this._prelimContent=null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var t=new n;return this.forEach((function(e,n){t.set(n,e instanceof Pe?e.clone():e)})),t}},{key:"_callObserver",value:function(t,e){Ue(this,t,new tn(this,t,e))}},{key:"toJSON",value:function(){var t={};return this._map.forEach((function(e,n){if(!e.deleted){var r=e.content.getContent()[e.length-1];t[n]=r instanceof Pe?r.toJSON():r}})),t}},{key:"keys",value:function(){return st(Ze(this._map),(function(t){return t[0]}))}},{key:"values",value:function(){return st(Ze(this._map),(function(t){return t[1].content.getContent()[t[1].length-1]}))}},{key:"entries",value:function(){return st(Ze(this._map),(function(t){return[t[0],t[1].content.getContent()[t[1].length-1]]}))}},{key:"forEach",value:function(t){var e=this;return this._map.forEach((function(n,r){n.deleted||t(n.content.getContent()[n.length-1],r,e)})),{}}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"delete",value:function(t){var e=this;null!==this.doc?Oe(this.doc,(function(n){qe(n,e,t)})):this._prelimContent.delete(t)}},{key:"set",value:function(t,e){var n=this;return null!==this.doc?Oe(this.doc,(function(r){Ge(r,n,t,e)})):this._prelimContent.set(t,e),e}},{key:"get",value:function(t){return Xe(this,t)}},{key:"has",value:function(t){return function(t,e){var n=t._map.get(e);return void 0!==n&&!n.deleted}(this,t)}},{key:"_write",value:function(t){t.writeTypeRef(Tn)}},{key:"size",get:function(){return Object(c.a)(Ze(this._map)).length}}]),n}(Pe),nn=function(t,e){return t===e||"object"===typeof t&&"object"===typeof e&&t&&e&&J(t,e)},rn=function(){function t(e,n,r,i){Object(v.a)(this,t),this.left=e,this.right=n,this.index=r,this.currentAttributes=i}return Object(f.a)(t,[{key:"forward",value:function(){switch(null===this.right&&L(),this.right.content.constructor){case Cn:case Nn:this.right.deleted||(this.index+=this.right.length);break;case An:this.right.deleted||an(this.currentAttributes,this.right.content)}this.left=this.right,this.right=this.right.right}}]),t}(),cn=function(t,e,n){for(;null!==e.right&&n>0;){switch(e.right.content.constructor){case Cn:case Nn:e.right.deleted||(n<e.right.length&&se(t,Zt(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break;case An:e.right.deleted||an(e.currentAttributes,e.right.content)}e.left=e.right,e.right=e.right.right}return e},un=function(t,e,n){var r=new Map,i=Te(e,n);if(i){var c=new rn(i.p.left,i.p,i.index,r);return cn(t,c,n-i.index)}var u=new rn(null,e._start,0,r);return cn(t,u,n)},on=function(t,e,n,r){for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===An&&nn(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();var i=t.doc,c=i.clientID,u=n.left,o=n.right;r.forEach((function(r,a){(u=new Bn(Zt(c,ce(i.store,c)),u,u&&u.lastId,o,o&&o.id,e,null,new An(a,r))).integrate(t,0),n.right=u}))},an=function(t,e){var n=e.key,r=e.value;null===r?t.delete(n):t.set(n,r)},ln=function(t,e){for(;null!==t.right&&(t.right.deleted||t.right.content.constructor===An&&nn(e[t.right.content.key]||null,t.right.content.value));)t.forward()},sn=function(t,e,n,r){var i=t.doc,c=i.clientID,u=new Map;for(var o in r){var a=r[o],l=n.currentAttributes.get(o)||null;if(!nn(l,a)){u.set(o,l);var s=n.left,f=n.right;n.right=new Bn(Zt(c,ce(i.store,c)),s,s&&s.lastId,f,f&&f.id,e,null,new An(o,a)),n.right.integrate(t,0),n.forward()}}return u},fn=function(t,e,n,r,i){n.currentAttributes.forEach((function(t,e){void 0===i[e]&&(i[e]=null)}));var c=t.doc,u=c.clientID;ln(n,i);var o=sn(t,e,n,i),a=r.constructor===String?new Nn(r):new Cn(r),l=n.left,s=n.right,f=n.index;e._searchMarker&&Re(e._searchMarker,n.index,a.getLength()),(s=new Bn(Zt(u,ce(c.store,u)),l,l&&l.lastId,s,s&&s.id,e,null,a)).integrate(t,0),n.right=s,n.index=f,n.forward(),on(t,e,n,o)},hn=function(t,e,n,r,i){var c=t.doc,u=c.clientID;ln(n,i);for(var o=sn(t,e,n,i);r>0&&null!==n.right;){if(!n.right.deleted)switch(n.right.content.constructor){case An:var a=n.right.content,l=a.key,s=a.value,f=i[l];void 0!==f&&(nn(f,s)?o.delete(l):o.set(l,s),n.right.delete(t));break;case Cn:case Nn:r<n.right.length&&se(t,Zt(n.right.id.client,n.right.id.clock+r)),r-=n.right.length}n.forward()}if(r>0){for(var h="";r>0;r--)h+="\n";n.right=new Bn(Zt(u,ce(c.store,u)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new Nn(h)),n.right.integrate(t,0),n.forward()}on(t,e,n,o)},dn=function(t,e,n,r,i){for(;n&&n.content.constructor!==Nn&&n.content.constructor!==Cn;)n.deleted||n.content.constructor!==An||an(i,n.content),n=n.right;for(var c=0;e!==n;){if(!e.deleted){var u=e.content;switch(u.constructor){case An:var o=u.key,a=u.value;(i.get(o)||null)===a&&(r.get(o)||null)!==a||(e.delete(t),c++)}}e=e.right}return c},vn=function(t,e,n){for(var r=n,i=Object(y.b)(e.currentAttributes),c=e.right;n>0&&null!==e.right;){if(!1===e.right.deleted)switch(e.right.content.constructor){case Cn:case Nn:n<e.right.length&&se(t,Zt(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t)}e.forward()}c&&dn(t,c,e.right,i,Object(y.b)(e.currentAttributes));var u=(e.left||e.right).parent;return u._searchMarker&&Re(u._searchMarker,e.index,-r+n),e},gn=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(t,r,i){var c;return Object(v.a)(this,n),(c=e.call(this,t,r))._delta=null,c.childListChanged=!1,c.keysChanged=new Set,i.forEach((function(t){null===t?c.childListChanged=!0:c.keysChanged.add(t)})),c}return Object(f.a)(n,[{key:"delta",get:function(){var t=this;if(null===this._delta){var e=this.target.doc;this._delta=[],Oe(e,(function(e){for(var n=t._delta,r=new Map,i=new Map,c=t.target._start,u=null,o={},a="",l=0,s=0,f=function(){if(null!==u){var t;switch(u){case"delete":t={delete:s},s=0;break;case"insert":t={insert:a},r.size>0&&(t.attributes={},r.forEach((function(e,n){null!==e&&(t.attributes[n]=e)}))),a="";break;case"retain":if(t={retain:l},Object.keys(o).length>0)for(var e in t.attributes={},o)t.attributes[e]=o[e];l=0}n.push(t),u=null}};null!==c;){switch(c.content.constructor){case Cn:t.adds(c)?t.deletes(c)||(f(),u="insert",a=c.content.embed,f()):t.deletes(c)?("delete"!==u&&(f(),u="delete"),s+=1):c.deleted||("retain"!==u&&(f(),u="retain"),l+=1);break;case Nn:t.adds(c)?t.deletes(c)||("insert"!==u&&(f(),u="insert"),a+=c.content.str):t.deletes(c)?("delete"!==u&&(f(),u="delete"),s+=c.length):c.deleted||("retain"!==u&&(f(),u="retain"),l+=c.length);break;case An:var h=c.content,d=h.key,v=h.value;if(t.adds(c)){if(!t.deletes(c)){var g=r.get(d)||null;nn(g,v)?c.delete(e):("retain"===u&&f(),nn(v,i.get(d)||null)?delete o[d]:o[d]=v)}}else if(t.deletes(c)){i.set(d,v);var b=r.get(d)||null;nn(b,v)||("retain"===u&&f(),o[d]=b)}else if(!c.deleted){i.set(d,v);var y=o[d];void 0!==y&&(nn(y,v)?c.delete(e):("retain"===u&&f(),null===v?o[d]=v:delete o[d]))}c.deleted||("insert"===u&&f(),an(r,c.content))}c=c.right}for(f();n.length>0;){var k=n[n.length-1];if(void 0===k.retain||void 0!==k.attributes)break;n.pop()}}))}return this._delta}}]),n}(Me),bn=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this))._pending=void 0!==t?[function(){return r.insert(0,t)}]:[],r._searchMarker=[],r}return Object(f.a)(n,[{key:"_integrate",value:function(t,e){Object(h.a)(Object(d.a)(n.prototype),"_integrate",this).call(this,t,e);try{this._pending.forEach((function(t){return t()}))}catch(r){console.error(r)}this._pending=null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var t=new n;return t.applyDelta(this.toDelta()),t}},{key:"_callObserver",value:function(t,e){var r=this;Object(h.a)(Object(d.a)(n.prototype),"_callObserver",this).call(this,t,e);var i=new gn(this,t,e),c=t.doc;if(!t.local){var u,o=!1,s=Object(a.a)(t.afterState.entries());try{for(s.s();!(u=s.n()).done;){var f=Object(l.a)(u.value,2),v=f[0],g=f[1],b=t.beforeState.get(v)||0;if(g!==b&&(he(t,c.store.clients.get(v),b,g,(function(t){t.deleted||t.content.constructor!==An||(o=!0)})),o))break}}catch(k){s.e(k)}finally{s.f()}o||vt(t,t.deleteSet,(function(t){t instanceof _n||o||t.parent===r&&t.content.constructor===An&&(o=!0)})),Oe(c,(function(t){o?function(t){var e=0;Oe(t.doc,(function(n){for(var r=t._start,i=t._start,c=Object(y.c)(),u=Object(y.b)(c);i;){if(!1===i.deleted)switch(i.content.constructor){case An:an(u,i.content);break;case Cn:case Nn:e+=dn(n,r,i,c,u),c=Object(y.b)(u),r=i}i=i.right}}))}(r):vt(t,t.deleteSet,(function(e){e instanceof _n||e.parent===r&&function(t,e){for(;e&&e.right&&(e.right.deleted||e.right.content.constructor!==Nn&&e.right.content.constructor!==Cn);)e=e.right;for(var n=new Set;e&&(e.deleted||e.content.constructor!==Nn&&e.content.constructor!==Cn);){if(!e.deleted&&e.content.constructor===An){var r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}}(t,e)}))}))}Ue(this,t,i)}},{key:"toString",value:function(){for(var t="",e=this._start;null!==e;)!e.deleted&&e.countable&&e.content.constructor===Nn&&(t+=e.content.str),e=e.right;return t}},{key:"toJSON",value:function(){return this.toString()}},{key:"applyDelta",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.sanitize,i=void 0===r||r;null!==this.doc?Oe(this.doc,(function(n){for(var r=new rn(null,e._start,0,new Map),c=0;c<t.length;c++){var u=t[c];if(void 0!==u.insert){var o=i||"string"!==typeof u.insert||c!==t.length-1||null!==r.right||"\n"!==u.insert.slice(-1)?u.insert:u.insert.slice(0,-1);("string"!==typeof o||o.length>0)&&fn(n,e,r,o,u.attributes||{})}else void 0!==u.retain?hn(n,e,r,u.retain,u.attributes||{}):void 0!==u.delete&&vn(n,r,u.delete)}})):this._pending.push((function(){return e.applyDelta(t)}))}},{key:"toDelta",value:function(t,e,n){var r=[],i=new Map,c=this.doc,u="",o=this._start;function a(){if(u.length>0){var t={},e=!1;i.forEach((function(n,r){e=!0,t[r]=n}));var n={insert:u};e&&(n.attributes=t),r.push(n),u=""}}return Oe(c,(function(c){for(t&&ne(c,t),e&&ne(c,e);null!==o;){if(ee(o,t)||void 0!==e&&ee(o,e))switch(o.content.constructor){case Nn:var l=i.get("ychange");void 0===t||ee(o,t)?void 0===e||ee(o,e)?void 0!==l&&(a(),i.delete("ychange")):void 0!==l&&l.user===o.id.client&&"added"===l.state||(a(),i.set("ychange",n?n("added",o.id):{type:"added"})):void 0!==l&&l.user===o.id.client&&"removed"===l.state||(a(),i.set("ychange",n?n("removed",o.id):{type:"removed"})),u+=o.content.str;break;case Cn:a();var s={insert:o.content.embed};i.size>0&&function(){var t={};s.attributes=t,i.forEach((function(e,n){t[n]=e}))}(),r.push(s);break;case An:ee(o,t)&&(a(),an(i,o.content))}o=o.right}a()}),ne),r}},{key:"insert",value:function(t,e,n){var r=this;if(!(e.length<=0)){var i=this.doc;null!==i?Oe(i,(function(i){var c=un(i,r,t);n||(n={},c.currentAttributes.forEach((function(t,e){n[e]=t}))),fn(i,r,c,e,n)})):this._pending.push((function(){return r.insert(t,e,n)}))}}},{key:"insertEmbed",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.constructor!==Object)throw new Error("Embed must be an Object");var i=this.doc;null!==i?Oe(i,(function(i){var c=un(i,n,t);fn(i,n,c,e,r)})):this._pending.push((function(){return n.insertEmbed(t,e,r)}))}},{key:"delete",value:function(t,e){var n=this;if(0!==e){var r=this.doc;null!==r?Oe(r,(function(r){vn(r,un(r,n,t),e)})):this._pending.push((function(){return n.delete(t,e)}))}}},{key:"format",value:function(t,e,n){var r=this;if(0!==e){var i=this.doc;null!==i?Oe(i,(function(i){var c=un(i,r,t);null!==c.right&&hn(i,r,c,e,n)})):this._pending.push((function(){return r.format(t,e,n)}))}}},{key:"removeAttribute",value:function(t){var e=this;null!==this.doc?Oe(this.doc,(function(n){qe(n,e,t)})):this._pending.push((function(){return e.removeAttribute(t)}))}},{key:"setAttribute",value:function(t,e){var n=this;null!==this.doc?Oe(this.doc,(function(r){Ge(r,n,t,e)})):this._pending.push((function(){return n.setAttribute(t,e)}))}},{key:"getAttribute",value:function(t){return Xe(this,t)}},{key:"getAttributes",value:function(t){return Ye(this)}},{key:"_write",value:function(t){t.writeTypeRef(Rn)}},{key:"length",get:function(){return this._length}}]),n}(Pe),yn=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};Object(v.a)(this,t),this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0}return Object(f.a)(t,[{key:Symbol.iterator,value:function(){return this}},{key:"next",value:function(){var t=this._currentNode,e=t.content.type;if(null!==t&&(!this._firstCall||t.deleted||!this._filter(e)))do{if(e=t.content.type,t.deleted||e.constructor!==pn&&e.constructor!==kn||null===e._start)for(;null!==t;){if(null!==t.right){t=t.right;break}t=t.parent===this._root?null:t.parent._item}else t=e._start}while(null!==t&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,null===t?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}]),t}(),kn=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(){var t;return Object(v.a)(this,n),(t=e.call(this))._prelimContent=[],t}return Object(f.a)(n,[{key:"_integrate",value:function(t,e){Object(h.a)(Object(d.a)(n.prototype),"_integrate",this).call(this,t,e),this.insert(0,this._prelimContent),this._prelimContent=null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var t=new n;return t.insert(0,t.toArray().map((function(t){return t instanceof Pe?t.clone():t}))),t}},{key:"createTreeWalker",value:function(t){return new yn(this,t)}},{key:"querySelector",value:function(t){t=t.toUpperCase();var e=new yn(this,(function(e){return e.nodeName&&e.nodeName.toUpperCase()===t})).next();return e.done?null:e.value}},{key:"querySelectorAll",value:function(t){return t=t.toUpperCase(),Array.from(new yn(this,(function(e){return e.nodeName&&e.nodeName.toUpperCase()===t})))}},{key:"_callObserver",value:function(t,e){Ue(this,t,new On(this,e,t))}},{key:"toString",value:function(){return We(this,(function(t){return t.toString()})).join("")}},{key:"toJSON",value:function(){return this.toString()}},{key:"toDOM",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),Fe(this,(function(i){r.insertBefore(i.toDOM(t,e,n),null)})),r}},{key:"insert",value:function(t,e){var n,r=this;null!==this.doc?Oe(this.doc,(function(n){He(n,r,t,e)})):(n=this._prelimContent).splice.apply(n,[t,0].concat(Object(c.a)(e)))}},{key:"insertAfter",value:function(t,e){var n=this;if(null!==this.doc)Oe(this.doc,(function(r){var i=t&&t instanceof Pe?t._item:t;Ke(r,n,i,e)}));else{var r=this._prelimContent,i=null===t?0:r.findIndex((function(e){return e===t}))+1;if(0===i&&null!==t)throw N("Reference item not found");r.splice.apply(r,[i,0].concat(Object(c.a)(e)))}}},{key:"delete",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null!==this.doc?Oe(this.doc,(function(r){ze(r,e,t,n)})):this._prelimContent.splice(t,n)}},{key:"toArray",value:function(){return Ve(this)}},{key:"push",value:function(t){this.insert(this.length,t)}},{key:"unshift",value:function(t){this.insert(0,t)}},{key:"get",value:function(t){return Be(this,t)}},{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return Je(this,t,e)}},{key:"_write",value:function(t){t.writeTypeRef(Pn)}},{key:"firstChild",get:function(){var t=this._first;return t?t.content.getContent()[0]:null}},{key:"length",get:function(){return null===this._prelimContent?this._length:this._prelimContent.length}}]),n}(Pe),pn=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"UNDEFINED";return Object(v.a)(this,n),(t=e.call(this)).nodeName=r,t._prelimAttrs=new Map,t}return Object(f.a)(n,[{key:"_integrate",value:function(t,e){var r=this;Object(h.a)(Object(d.a)(n.prototype),"_integrate",this).call(this,t,e),this._prelimAttrs.forEach((function(t,e){r.setAttribute(e,t)})),this._prelimAttrs=null}},{key:"_copy",value:function(){return new n(this.nodeName)}},{key:"clone",value:function(){var t=new n(this.nodeName),e=this.getAttributes();for(var r in e)t.setAttribute(r,e[r]);return t.insert(0,t.toArray().map((function(t){return t instanceof Pe?t.clone():t}))),t}},{key:"toString",value:function(){var t=this.getAttributes(),e=[],r=[];for(var i in t)r.push(i);r.sort();for(var c=r.length,u=0;u<c;u++){var o=r[u];e.push(o+'="'+t[o]+'"')}var a=this.nodeName.toLocaleLowerCase(),l=e.length>0?" "+e.join(" "):"";return"<".concat(a).concat(l,">").concat(Object(h.a)(Object(d.a)(n.prototype),"toString",this).call(this),"</").concat(a,">")}},{key:"removeAttribute",value:function(t){var e=this;null!==this.doc?Oe(this.doc,(function(n){qe(n,e,t)})):this._prelimAttrs.delete(t)}},{key:"setAttribute",value:function(t,e){var n=this;null!==this.doc?Oe(this.doc,(function(r){Ge(r,n,t,e)})):this._prelimAttrs.set(t,e)}},{key:"getAttribute",value:function(t){return Xe(this,t)}},{key:"getAttributes",value:function(t){return Ye(this)}},{key:"toDOM",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.createElement(this.nodeName),i=this.getAttributes();for(var c in i)r.setAttribute(c,i[c]);return Fe(this,(function(i){r.appendChild(i.toDOM(t,e,n))})),void 0!==n&&n._createAssociation(r,this),r}},{key:"_write",value:function(t){t.writeTypeRef(Un),t.writeKey(this.nodeName)}},{key:"nextSibling",get:function(){var t=this._item?this._item.next:null;return t?t.content.type:null}},{key:"prevSibling",get:function(){var t=this._item?this._item.prev:null;return t?t.content.type:null}}]),n}(kn),On=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(t,r,i){var c;return Object(v.a)(this,n),(c=e.call(this,t,i)).childListChanged=!1,c.attributesChanged=new Set,r.forEach((function(t){null===t?c.childListChanged=!0:c.attributesChanged.add(t)})),c}return n}(Me),wn=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).hookName=t,r}return Object(f.a)(n,[{key:"_copy",value:function(){return new n(this.hookName)}},{key:"clone",value:function(){var t=new n(this.hookName);return this.forEach((function(e,n){t.set(n,e)})),t}},{key:"toDOM",value:function(){arguments.length>0&&void 0!==arguments[0]||document;var t,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e[this.hookName];return(t=void 0!==r?r.createDom(this):document.createElement(this.hookName)).setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(t,this),t}},{key:"_write",value:function(t){t.writeTypeRef(Jn),t.writeKey(this.hookName)}}]),n}(en),jn=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var t=new n;return t.applyDelta(this.toDelta()),t}},{key:"toDOM",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,e=arguments.length>2?arguments[2]:void 0,n=t.createTextNode(this.toString());return void 0!==e&&e._createAssociation(n,this),n}},{key:"toString",value:function(){return this.toDelta().map((function(t){var e=[];for(var n in t.attributes){var r=[];for(var i in t.attributes[n])r.push({key:i,value:t.attributes[n][i]});r.sort((function(t,e){return t.key<e.key?-1:1})),e.push({nodeName:n,attrs:r})}e.sort((function(t,e){return t.nodeName<e.nodeName?-1:1}));for(var c="",u=0;u<e.length;u++){var o=e[u];c+="<".concat(o.nodeName);for(var a=0;a<o.attrs.length;a++){var l=o.attrs[a];c+=" ".concat(l.key,'="').concat(l.value,'"')}c+=">"}c+=t.insert;for(var s=e.length-1;s>=0;s--)c+="</".concat(e[s].nodeName,">");return c})).join("")}},{key:"toJSON",value:function(){return this.toString()}},{key:"_write",value:function(t){t.writeTypeRef(Vn)}},{key:"nextSibling",get:function(){var t=this._item?this._item.next:null;return t?t.content.type:null}},{key:"prevSibling",get:function(){var t=this._item?this._item.prev:null;return t?t.content.type:null}}]),n}(bn),mn=function(){function t(e,n){Object(v.a)(this,t),this.id=e,this.length=n}return Object(f.a)(t,[{key:"mergeWith",value:function(t){return!1}},{key:"write",value:function(t,e,n){throw x()}},{key:"integrate",value:function(t,e){throw x()}},{key:"deleted",get:function(){throw x()}}]),t}(),_n=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"delete",value:function(){}},{key:"mergeWith",value:function(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}},{key:"integrate",value:function(t,e){e>0&&(this.id.clock+=e,this.length-=e),ue(t.doc.store,this)}},{key:"write",value:function(t,e){t.writeInfo(0),t.writeLen(this.length-e)}},{key:"getMissing",value:function(t,e){return null}},{key:"deleted",get:function(){return!0}}]),n}(mn),Sn=function(){function t(e){Object(v.a)(this,t),this.content=e}return Object(f.a)(t,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.content]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new t(this.content)}},{key:"splice",value:function(t){throw x()}},{key:"mergeWith",value:function(t){return!1}},{key:"integrate",value:function(t,e){}},{key:"delete",value:function(t){}},{key:"gc",value:function(t){}},{key:"write",value:function(t,e){t.writeBuf(this.content)}},{key:"getRef",value:function(){return 3}}]),t}(),En=function(){function t(e){Object(v.a)(this,t),this.len=e}return Object(f.a)(t,[{key:"getLength",value:function(){return this.len}},{key:"getContent",value:function(){return[]}},{key:"isCountable",value:function(){return!1}},{key:"copy",value:function(){return new t(this.len)}},{key:"splice",value:function(e){var n=new t(this.len-e);return this.len=e,n}},{key:"mergeWith",value:function(t){return this.len+=t.len,!0}},{key:"integrate",value:function(t,e){kt(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}},{key:"delete",value:function(t){}},{key:"gc",value:function(t){}},{key:"write",value:function(t,e){t.writeLen(this.len-e)}},{key:"getRef",value:function(){return 1}}]),t}(),Dn=function(){function t(e){Object(v.a)(this,t),e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;var n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),null!==e.meta&&(n.meta=e.meta)}return Object(f.a)(t,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.doc]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new t(this.doc)}},{key:"splice",value:function(t){throw x()}},{key:"mergeWith",value:function(t){return!1}},{key:"integrate",value:function(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}},{key:"delete",value:function(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}},{key:"gc",value:function(t){}},{key:"write",value:function(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}},{key:"getRef",value:function(){return 9}}]),t}(),Cn=function(){function t(e){Object(v.a)(this,t),this.embed=e}return Object(f.a)(t,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.embed]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new t(this.embed)}},{key:"splice",value:function(t){throw x()}},{key:"mergeWith",value:function(t){return!1}},{key:"integrate",value:function(t,e){}},{key:"delete",value:function(t){}},{key:"gc",value:function(t){}},{key:"write",value:function(t,e){t.writeJSON(this.embed)}},{key:"getRef",value:function(){return 5}}]),t}(),An=function(){function t(e,n){Object(v.a)(this,t),this.key=e,this.value=n}return Object(f.a)(t,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[]}},{key:"isCountable",value:function(){return!1}},{key:"copy",value:function(){return new t(this.key,this.value)}},{key:"splice",value:function(t){throw x()}},{key:"mergeWith",value:function(t){return!1}},{key:"integrate",value:function(t,e){e.parent._searchMarker=null}},{key:"delete",value:function(t){}},{key:"gc",value:function(t){}},{key:"write",value:function(t,e){t.writeKey(this.key),t.writeJSON(this.value)}},{key:"getRef",value:function(){return 6}}]),t}(),Mn=function(){function t(e){Object(v.a)(this,t),this.arr=e}return Object(f.a)(t,[{key:"getLength",value:function(){return this.arr.length}},{key:"getContent",value:function(){return this.arr}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new t(this.arr)}},{key:"splice",value:function(e){var n=new t(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}},{key:"mergeWith",value:function(t){return this.arr=this.arr.concat(t.arr),!0}},{key:"integrate",value:function(t,e){}},{key:"delete",value:function(t){}},{key:"gc",value:function(t){}},{key:"write",value:function(t,e){var n=this.arr.length;t.writeLen(n-e);for(var r=e;r<n;r++){var i=this.arr[r];t.writeString(void 0===i?"undefined":JSON.stringify(i))}}},{key:"getRef",value:function(){return 2}}]),t}(),In=function(){function t(e){Object(v.a)(this,t),this.arr=e}return Object(f.a)(t,[{key:"getLength",value:function(){return this.arr.length}},{key:"getContent",value:function(){return this.arr}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new t(this.arr)}},{key:"splice",value:function(e){var n=new t(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}},{key:"mergeWith",value:function(t){return this.arr=this.arr.concat(t.arr),!0}},{key:"integrate",value:function(t,e){}},{key:"delete",value:function(t){}},{key:"gc",value:function(t){}},{key:"write",value:function(t,e){var n=this.arr.length;t.writeLen(n-e);for(var r=e;r<n;r++){var i=this.arr[r];t.writeAny(i)}}},{key:"getRef",value:function(){return 8}}]),t}(),Nn=function(){function t(e){Object(v.a)(this,t),this.str=e}return Object(f.a)(t,[{key:"getLength",value:function(){return this.str.length}},{key:"getContent",value:function(){return this.str.split("")}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new t(this.str)}},{key:"splice",value:function(e){var n=new t(this.str.slice(e));this.str=this.str.slice(0,e);var r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"\ufffd",n.str="\ufffd"+n.str.slice(1)),n}},{key:"mergeWith",value:function(t){return this.str+=t.str,!0}},{key:"integrate",value:function(t,e){}},{key:"delete",value:function(t){}},{key:"gc",value:function(t){}},{key:"write",value:function(t,e){t.writeString(0===e?this.str:this.str.slice(e))}},{key:"getRef",value:function(){return 4}}]),t}(),xn=[function(t){return new $e},function(t){return new en},function(t){return new bn},function(t){return new pn(t.readKey())},function(t){return new kn},function(t){return new wn(t.readKey())},function(t){return new jn}],Ln=0,Tn=1,Rn=2,Un=3,Pn=4,Jn=5,Vn=6,Fn=function(){function t(e){Object(v.a)(this,t),this.type=e}return Object(f.a)(t,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.type]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new t(this.type._copy())}},{key:"splice",value:function(t){throw x()}},{key:"mergeWith",value:function(t){return!1}},{key:"integrate",value:function(t,e){this.type._integrate(t.doc,e)}},{key:"delete",value:function(t){for(var e=this.type._start;null!==e;)e.deleted?t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach((function(e){e.deleted?t._mergeStructs.push(e):e.delete(t)})),t.changed.delete(this.type)}},{key:"gc",value:function(t){for(var e=this.type._start;null!==e;)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach((function(e){for(;null!==e;)e.gc(t,!0),e=e.left})),this.type._map=new Map}},{key:"write",value:function(t,e){this.type._write(t)}},{key:"getRef",value:function(){return 7}}]),t}(),Wn=function(t,e,n){var r=e.id,i=r.client,c=r.clock,u=new Bn(Zt(i,c+n),e,Zt(i,c+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&u.markDeleted(),e.keep&&(u.keep=!0),null!==e.redone&&(u.redone=Zt(e.redone.client,e.redone.clock+n)),e.right=u,null!==u.right&&(u.right.left=u),t._mergeStructs.push(u),null!==u.parentSub&&null===u.right&&u.parent._map.set(u.parentSub,u),e.length=n,u},Bn=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(t,r,i,c,u,o,a,l){var s;return Object(v.a)(this,n),(s=e.call(this,t,l.getLength())).origin=i,s.left=r,s.right=c,s.rightOrigin=u,s.parent=o,s.parentSub=a,s.redone=null,s.content=l,s.info=s.content.isCountable()?T.b:0,s}return Object(f.a)(n,[{key:"markDeleted",value:function(){this.info|=T.c}},{key:"getMissing",value:function(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=ce(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=ce(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Xt&&this.id.client!==this.parent.client&&this.parent.clock>=ce(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=fe(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=se(t,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===_n||this.right&&this.right.constructor===_n)&&(this.parent=null),this.parent){if(this.parent.constructor===Xt){var r=ae(e,this.parent);r.constructor===_n?this.parent=null:this.parent=r.content.type}}else this.left&&this.left.constructor===n&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===n&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}},{key:"integrate",value:function(t,e){if(e>0&&(this.id.clock+=e,this.left=fe(t,t.doc.store,Zt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){var n,r=this.left;if(null!==r)n=r.right;else if(null!==this.parentSub)for(n=this.parent._map.get(this.parentSub)||null;null!==n&&null!==n.left;)n=n.left;else n=this.parent._start;for(var i=new Set,c=new Set;null!==n&&n!==this.right;){if(c.add(n),i.add(n),Yt(this.origin,n.origin)){if(n.id.client<this.id.client)r=n,i.clear();else if(Yt(this.rightOrigin,n.rightOrigin))break}else{if(null===n.origin||!c.has(ae(t.doc.store,n.origin)))break;i.has(ae(t.doc.store,n.origin))||(r=n,i.clear())}n=n.right}this.left=r}if(null!==this.left){var u=this.left.right;this.right=u,this.left.right=this}else{var o;if(null!==this.parentSub)for(o=this.parent._map.get(this.parentSub)||null;null!==o&&null!==o.left;)o=o.left;else o=this.parent._start,this.parent._start=this;this.right=o}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(t)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),ue(t.doc.store,this),this.content.integrate(t,this),ge(t,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(t)}else new _n(this.id,this.length).integrate(t,0)}},{key:"mergeWith",value:function(t){return!!(this.constructor===t.constructor&&Yt(t.origin,this.lastId)&&this.right===t&&Yt(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&null===this.redone&&null===t.redone&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content))&&(t.keep&&(this.keep=!0),this.right=t.right,null!==this.right&&(this.right.left=this),this.length+=t.length,!0)}},{key:"delete",value:function(t){if(!this.deleted){var e=this.parent;this.countable&&null===this.parentSub&&(e._length-=this.length),this.markDeleted(),kt(t.deleteSet,this.id.client,this.id.clock,this.length),ge(t,e,this.parentSub),this.content.delete(t)}}},{key:"gc",value:function(t,e){if(!this.deleted)throw L();this.content.gc(t),e?function(t,e,n){var r=t.clients.get(e.id.client);r[oe(r,e.id.clock)]=n}(t,this,new _n(this.id,this.length)):this.content=new En(this.length)}},{key:"write",value:function(t,e){var n=e>0?Zt(this.id.client,this.id.clock+e-1):this.origin,r=this.rightOrigin,i=this.parentSub,c=this.content.getRef()&T.i|(null===n?0:T.g)|(null===r?0:T.f)|(null===i?0:T.e);if(t.writeInfo(c),null!==n&&t.writeLeftID(n),null!==r&&t.writeRightID(r),null===n&&null===r){var u=this.parent;if(void 0!==u._item){var o=u._item;if(null===o){var a=Qt(u);t.writeParentInfo(!0),t.writeString(a)}else t.writeParentInfo(!1),t.writeLeftID(o.id)}else u.constructor===String?(t.writeParentInfo(!0),t.writeString(u)):u.constructor===Xt?(t.writeParentInfo(!1),t.writeLeftID(u)):L();null!==i&&t.writeString(i)}this.content.write(t,e)}},{key:"marker",set:function(t){(this.info&T.d)>0!==t&&(this.info^=T.d)},get:function(){return(this.info&T.d)>0}},{key:"keep",get:function(){return(this.info&T.a)>0},set:function(t){this.keep!==t&&(this.info^=T.a)}},{key:"countable",get:function(){return(this.info&T.b)>0}},{key:"deleted",get:function(){return(this.info&T.c)>0},set:function(t){this.deleted!==t&&(this.info^=T.c)}},{key:"next",get:function(){for(var t=this.right;null!==t&&t.deleted;)t=t.right;return t}},{key:"prev",get:function(){for(var t=this.left;null!==t&&t.deleted;)t=t.left;return t}},{key:"lastId",get:function(){return 1===this.length?this.id:Zt(this.id.client,this.id.clock+this.length-1)}}]),n}(mn),Kn=function(t,e){return Hn[e&T.i](t)},Hn=[function(){L()},function(t){return new En(t.readLen())},function(t){for(var e=t.readLen(),n=[],r=0;r<e;r++){var i=t.readString();"undefined"===i?n.push(void 0):n.push(JSON.parse(i))}return new Mn(n)},function(t){return new Sn(t.readBuf())},function(t){return new Nn(t.readString())},function(t){return new Cn(t.readJSON())},function(t){return new An(t.readString(),t.readJSON())},function(t){return new Fn(xn[t.readTypeRef()](t))},function(t){for(var e=t.readLen(),n=[],r=0;r<e;r++)n.push(t.readAny());return new In(n)},function(t){return new Dn(new St(Object(s.a)({guid:t.readString()},t.readAny())))},function(){L()}],zn=function(t){Object(g.a)(n,t);var e=Object(b.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"delete",value:function(){}},{key:"mergeWith",value:function(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}},{key:"integrate",value:function(t,e){L()}},{key:"write",value:function(t,e){t.writeInfo(10),Object(_.m)(t.restEncoder,this.length-e)}},{key:"getMissing",value:function(t,e){return null}},{key:"deleted",get:function(){return!0}}]),n}(mn)},1269:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(26);function i(t){var e=function(t,e){if("object"!==Object(r.a)(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Object(r.a)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Object(r.a)(e)?e:String(e)}},174:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"e",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return l}));var r=n(4),i=n(24),c=function(){return new Map},u=function(t){var e=c();return t.forEach((function(t,n){e.set(n,t)})),e},o=function(t,e,n){var r=t.get(e);return void 0===r&&t.set(e,r=n()),r},a=function(t,e){var n,c=[],u=Object(i.a)(t);try{for(u.s();!(n=u.n()).done;){var o=Object(r.a)(n.value,2),a=o[0],l=o[1];c.push(e(l,a))}}catch(s){u.e(s)}finally{u.f()}return c},l=function(t,e){var n,c=Object(i.a)(t);try{for(c.s();!(n=c.n()).done;){var u=Object(r.a)(n.value,2),o=u[0];if(e(u[1],o))return!0}}catch(a){c.e(a)}finally{c.f()}return!1}},203:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return l})),n.d(e,"i",(function(){return s})),n.d(e,"j",(function(){return f})),n.d(e,"k",(function(){return h})),n.d(e,"l",(function(){return d})),n.d(e,"h",(function(){return v}));var r=1,i=2,c=4,u=8,o=32,a=64,l=128,s=31,f=63,h=127,d=255,v=2147483647},235:function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return o}));var r=n(333),i=n(334),c=(n(534),n(335),function(t){return new Uint8Array(t)}),u=function(t,e,n){return new Uint8Array(t,e,n)},o=(i.b,i.b,function(t){var e=c(t.byteLength);return e.set(t),e})}).call(this,n(68).Buffer)},330:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(18);function i(t,e,n){return(i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(r.a)(t)););return t}(t,e);if(i){var c=Object.getOwnPropertyDescriptor(i,e);return c.get?c.get.call(n):c.value}})(t,e,n||t)}},333:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return u}));var r=String.fromCharCode,i=(String.fromCodePoint,/^\s*/g),c=/([A-Z])/g,u=function(t,e){return function(t){return t.replace(i,"")}(t.replace(c,(function(t){return"".concat(e).concat(function(t){return t.toLowerCase()}(t))})))},o=("undefined"!==typeof TextEncoder&&new TextEncoder,"undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0}));o&&1===o.decode(new Uint8Array).length&&(o=null)},334:function(t,e,n){"use strict";(function(t){n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return v}));var r,i,c=n(4),u=n(174),o=n(333),a=n(541),l=n(542),s="undefined"!==typeof t&&t.release&&/node|io\.js/.test(t.release.name),f="undefined"!==typeof window&&!s,h=("undefined"!==typeof navigator&&/Mac/.test(navigator.platform),[]),d=function(){if(void 0===r)if(s){r=u.c();for(var e=t.argv,n=null,i=0;i<e.length;i++){var a=e[i];"-"===a[0]?(null!==n&&r.set(n,""),n=a):null!==n?(r.set(n,a),n=null):h.push(a)}null!==n&&r.set(n,"")}else"object"===typeof location?(r=u.c(),(location.search||"?").slice(1).split("&").forEach((function(t){if(0!==t.length){var e=t.split("="),n=Object(c.a)(e,2),i=n[0],u=n[1];r.set("--".concat(o.a(i,"-")),u),r.set("-".concat(o.a(i,"-")),u)}}))):r=u.c();return r},v=function(t){return s?a.a(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t.toUpperCase()]):a.a(l.a.getItem(t))};(function(t){return d().has(t)})("--"+(i="production"))||v(i)}).call(this,n(39))},335:function(t,e,n){"use strict";n.d(e,"e",(function(){return f})),n.d(e,"f",(function(){return h})),n.d(e,"l",(function(){return v})),n.d(e,"h",(function(){return g})),n.d(e,"k",(function(){return b})),n.d(e,"i",(function(){return y})),n.d(e,"j",(function(){return k})),n.d(e,"g",(function(){return w})),n.d(e,"b",(function(){return j})),n.d(e,"d",(function(){return m})),n.d(e,"a",(function(){return _})),n.d(e,"c",(function(){return S}));var r=n(21),i=n(22),c=n(23),u=n(20),o=n(235),a=n(203),l=n(126),s=function t(e){Object(u.a)(this,t),this.arr=e,this.pos=0},f=function(t){return new s(t)},h=function(t){return t.pos!==t.arr.length},d=function(t,e){var n=o.b(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},v=function(t){return d(t,b(t))},g=function(t){return t.arr[t.pos++]},b=function(t){for(var e=0,n=0;;){var r=t.arr[t.pos++];if(e|=(r&a.k)<<n,n+=7,r<a.g)return e>>>0;if(n>35)throw new Error("Integer out of range!")}},y=function(t){var e=t.arr[t.pos++],n=e&a.j,r=6,i=(e&a.f)>0?-1:1;if(0===(e&a.g))return i*n;for(;;){if(n|=((e=t.arr[t.pos++])&a.k)<<r,r+=7,e<a.g)return i*(n>>>0);if(r>41)throw new Error("Integer out of range!")}},k=function(t){var e=b(t);if(0===e)return"";var n=String.fromCodePoint(g(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(g(t));else for(;e>0;){var r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))},p=function(t,e){var n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},O=[function(t){},function(t){return null},y,function(t){return p(t,4).getFloat32(0)},function(t){return p(t,8).getFloat64(0)},function(t){return p(t,8).getBigInt64(0)},function(t){return!1},function(t){return!0},k,function(t){for(var e=b(t),n={},r=0;r<e;r++){n[k(t)]=w(t)}return n},function(t){for(var e=b(t),n=[],r=0;r<e;r++)n.push(w(t));return n},v],w=function(t){return O[127-g(t)](t)},j=function(t){Object(i.a)(n,t);var e=Object(c.a)(n);function n(t,r){var i;return Object(u.a)(this,n),(i=e.call(this,t)).reader=r,i.s=null,i.count=0,i}return Object(r.a)(n,[{key:"read",value:function(){return 0===this.count&&(this.s=this.reader(this),h(this)?this.count=b(this)+1:this.count=-1),this.count--,this.s}}]),n}(s),m=function(t){Object(i.a)(n,t);var e=Object(c.a)(n);function n(t){var r;return Object(u.a)(this,n),(r=e.call(this,t)).s=0,r.count=0,r}return Object(r.a)(n,[{key:"read",value:function(){if(0===this.count){this.s=y(this);var t=l.d(this.s);this.count=1,t&&(this.s=-this.s,this.count=b(this)+2)}return this.count--,this.s}}]),n}(s),_=function(t){Object(i.a)(n,t);var e=Object(c.a)(n);function n(t){var r;return Object(u.a)(this,n),(r=e.call(this,t)).s=0,r.count=0,r.diff=0,r}return Object(r.a)(n,[{key:"read",value:function(){if(0===this.count){var t=y(this),e=1&t;this.diff=t>>1,this.count=1,e&&(this.count=b(this)+2)}return this.s+=this.diff,this.count--,this.s}}]),n}(s),S=function(){function t(e){Object(u.a)(this,t),this.decoder=new m(e),this.str=k(this.decoder),this.spos=0}return Object(r.a)(t,[{key:"read",value:function(){var t=this.spos+this.decoder.read(),e=this.str.slice(this.spos,t);return this.spos=t,e}}]),t}()},533:function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},c=Object.keys(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}n.d(e,"a",(function(){return r}))},534:function(t,e,n){"use strict";n.d(e,"e",(function(){return h})),n.d(e,"f",(function(){return d})),n.d(e,"i",(function(){return g})),n.d(e,"m",(function(){return b})),n.d(e,"k",(function(){return y})),n.d(e,"l",(function(){return k})),n.d(e,"h",(function(){return p})),n.d(e,"j",(function(){return O})),n.d(e,"n",(function(){return w})),n.d(e,"g",(function(){return _})),n.d(e,"b",(function(){return S})),n.d(e,"d",(function(){return D})),n.d(e,"a",(function(){return A})),n.d(e,"c",(function(){return M}));var r=n(21),i=n(22),c=n(23),u=n(20),o=n(235),a=n(126),l=n(203),s=(Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,l.h,Number.isInteger||function(t){return"number"===typeof t&&isFinite(t)&&a.c(t)===t}),f=(Number.isNaN,function t(){Object(u.a)(this,t),this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}),h=function(){return new f},d=function(t){for(var e=new Uint8Array(function(t){for(var e=t.cpos,n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e}(t)),n=0,r=0;r<t.bufs.length;r++){var i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(o.b(t.cbuf.buffer,0,t.cpos),n),e},v=function(t,e){var n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(2*n),t.cpos=0),t.cbuf[t.cpos++]=e},g=v,b=function(t,e){for(;e>l.k;)v(t,l.g|l.k&e),e>>>=7;v(t,l.k&e)},y=function(t,e){var n=a.d(e);for(n&&(e=-e),v(t,(e>l.j?l.g:0)|(n?l.f:0)|l.j&e),e>>>=6;e>0;)v(t,(e>l.k?l.g:0)|l.k&e),e>>>=7},k=function(t,e){var n=unescape(encodeURIComponent(e)),r=n.length;b(t,r);for(var i=0;i<r;i++)v(t,n.codePointAt(i))},p=function(t,e){return O(t,d(e))},O=function(t,e){var n=t.cbuf.length,r=t.cpos,i=a.g(n-r,e.length),c=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,c>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(a.f(2*n,c)),t.cbuf.set(e.subarray(i)),t.cpos=c)},w=function(t,e){b(t,e.byteLength),O(t,e)},j=function(t,e){!function(t,e){var n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(o.b(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(2*a.f(n,e)),t.cpos=0)}(t,e);var n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},m=new DataView(new ArrayBuffer(4)),_=function t(e,n){switch(typeof n){case"string":v(e,119),k(e,n);break;case"number":s(n)&&n<=l.h?(v(e,125),y(e,n)):(o=n,m.setFloat32(0,o),m.getFloat32(0)===o?(v(e,124),function(t,e){j(t,4).setFloat32(0,e)}(e,n)):(v(e,123),function(t,e){j(t,8).setFloat64(0,e)}(e,n)));break;case"bigint":v(e,122),function(t,e){j(t,8).setBigInt64(0,e)}(e,n);break;case"object":if(null===n)v(e,126);else if(n instanceof Array){v(e,117),b(e,n.length);for(var r=0;r<n.length;r++)t(e,n[r])}else if(n instanceof Uint8Array)v(e,116),w(e,n);else{v(e,118);var i=Object.keys(n);b(e,i.length);for(var c=0;c<i.length;c++){var u=i[c];k(e,u),t(e,n[u])}}break;case"boolean":v(e,n?120:121);break;default:v(e,127)}var o},S=function(t){Object(i.a)(n,t);var e=Object(c.a)(n);function n(t){var r;return Object(u.a)(this,n),(r=e.call(this)).w=t,r.s=null,r.count=0,r}return Object(r.a)(n,[{key:"write",value:function(t){this.s===t?this.count++:(this.count>0&&b(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}]),n}(f),E=function(t){t.count>0&&(y(t.encoder,1===t.count?t.s:-t.s),t.count>1&&b(t.encoder,t.count-2))},D=function(){function t(){Object(u.a)(this,t),this.encoder=new f,this.s=0,this.count=0}return Object(r.a)(t,[{key:"write",value:function(t){this.s===t?this.count++:(E(this),this.count=1,this.s=t)}},{key:"toUint8Array",value:function(){return E(this),d(this.encoder)}}]),t}(),C=function(t){if(t.count>0){var e=t.diff<<1|(1===t.count?0:1);y(t.encoder,e),t.count>1&&b(t.encoder,t.count-2)}},A=function(){function t(){Object(u.a)(this,t),this.encoder=new f,this.s=0,this.count=0,this.diff=0}return Object(r.a)(t,[{key:"write",value:function(t){this.diff===t-this.s?(this.s=t,this.count++):(C(this),this.count=1,this.diff=t-this.s,this.s=t)}},{key:"toUint8Array",value:function(){return C(this),d(this.encoder)}}]),t}(),M=function(){function t(){Object(u.a)(this,t),this.sarr=[],this.s="",this.lensE=new D}return Object(r.a)(t,[{key:"write",value:function(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}},{key:"toUint8Array",value:function(){var t=new f;return this.sarr.push(this.s),this.s="",k(t,this.sarr.join("")),O(t,this.lensE.toUint8Array()),d(t)}}]),t}()},541:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return void 0===t?null:t}},542:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(20),i=n(21),c=new(function(){function t(){Object(r.a)(this,t),this.map=new Map}return Object(i.a)(t,[{key:"setItem",value:function(t,e){this.map.set(t,e)}},{key:"getItem",value:function(t){return this.map.get(t)}}]),t}());try{"undefined"!==typeof localStorage&&(c=localStorage)}catch(o){}var u=c},95:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(16);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}}}]);
//# sourceMappingURL=10.dfcf5623.chunk.js.map